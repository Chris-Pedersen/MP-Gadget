<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MP-Gadget: proto.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MP-Gadget
   &#160;<span id="projectnumber">5.0.0.dev0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">proto.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h__dep__incl.svg" width="283" height="228"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="proto_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a74dc0e5e9eefe11fc8434b62de573146"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a74dc0e5e9eefe11fc8434b62de573146">begrun</a> (int RestartSnapNum)</td></tr>
<tr class="separator:a74dc0e5e9eefe11fc8434b62de573146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa10a9f512f8d08ea8cf2927cf6dba0b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#aa10a9f512f8d08ea8cf2927cf6dba0b7">open_outputfiles</a> (int RestartsnapNum)</td></tr>
<tr class="separator:aa10a9f512f8d08ea8cf2927cf6dba0b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1abb9ee0e0a43ec19cdaa55c8ecd43c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#aa1abb9ee0e0a43ec19cdaa55c8ecd43c">close_outputfiles</a> (void)</td></tr>
<tr class="separator:aa1abb9ee0e0a43ec19cdaa55c8ecd43c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce8ad3893801ac7d380efd9b7ef26d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a8ce8ad3893801ac7d380efd9b7ef26d3">density</a> ()</td></tr>
<tr class="separator:a8ce8ad3893801ac7d380efd9b7ef26d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a137ca78a0bd40fa7a75438e90e4f66a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a137ca78a0bd40fa7a75438e90e4f66a8">density_update</a> ()</td></tr>
<tr class="separator:a137ca78a0bd40fa7a75438e90e4f66a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae903322da17c6875ab606b032b918099"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#ae903322da17c6875ab606b032b918099">energy_statistics</a> (void)</td></tr>
<tr class="separator:ae903322da17c6875ab606b032b918099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3890f7b7605d1abaf3cd23eeca5bcdd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a3890f7b7605d1abaf3cd23eeca5bcdd5">grav_short_tree</a> (void)</td></tr>
<tr class="separator:a3890f7b7605d1abaf3cd23eeca5bcdd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab080cb20bac2a1a6153a84e8cfd15374"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#ab080cb20bac2a1a6153a84e8cfd15374">init</a> (int RestartSnapNum)</td></tr>
<tr class="separator:ab080cb20bac2a1a6153a84e8cfd15374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05e0ffe612d44e6d7f3a9ae5b9df56a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a05e0ffe612d44e6d7f3a9ae5b9df56a2">run</a> (void)</td></tr>
<tr class="separator:a05e0ffe612d44e6d7f3a9ae5b9df56a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31e2b1268008cc19dc0456f0c6deb831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a31e2b1268008cc19dc0456f0c6deb831">runtests</a> (void)</td></tr>
<tr class="separator:a31e2b1268008cc19dc0456f0c6deb831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a312b6a02f7cde171412989ea5f9be48f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a312b6a02f7cde171412989ea5f9be48f">write_checkpoint</a> (int <a class="el" href="io_8c.html#aa920b944afc62d93d867175a9590b373">write_snapshot</a>, int write_fof)</td></tr>
<tr class="separator:a312b6a02f7cde171412989ea5f9be48f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a649bd481c6ef92bf202abfe0fe15449a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a649bd481c6ef92bf202abfe0fe15449a">dump_snapshot</a> (void)</td></tr>
<tr class="separator:a649bd481c6ef92bf202abfe0fe15449a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a946405237bbb09c2d6560930abfa5576"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a946405237bbb09c2d6560930abfa5576">find_last_snapnum</a> ()</td></tr>
<tr class="separator:a946405237bbb09c2d6560930abfa5576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af52079f2c63002aca9463ba0b13727df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#af52079f2c63002aca9463ba0b13727df">long_range_init</a> (void)</td></tr>
<tr class="separator:af52079f2c63002aca9463ba0b13727df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a55456b331c8b01d7ae1352809b82f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="proto_8h.html#a6a55456b331c8b01d7ae1352809b82f2">gravpm_force</a> (void)</td></tr>
<tr class="separator:a6a55456b331c8b01d7ae1352809b82f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a74dc0e5e9eefe11fc8434b62de573146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74dc0e5e9eefe11fc8434b62de573146">&#9670;&nbsp;</a></span>begrun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void begrun </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>RestartSnapNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function performs the initial set-up of the simulation. First, the parameterfile is set, then routines for setting units, reading ICs/restart-files are called, auxialiary memory is allocated, etc. </p>

<p class="definition">Definition at line <a class="el" href="begrun_8c_source.html#l00050">50</a> of file <a class="el" href="begrun_8c_source.html">begrun.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="allvars_8h_source.html#l00263">global_data_all_processes::AutoSnapshotTime</a>, <a class="el" href="allvars_8h_source.html#l00242">global_data_all_processes::BlackHoleOn</a>, <a class="el" href="allvars_8h_source.html#l00289">global_data_all_processes::CT</a>, <a class="el" href="hci_8c_source.html#l00011">HCI_DEFAULT_MANAGER</a>, <a class="el" href="hci_8c_source.html#l00030">hci_init()</a>, <a class="el" href="init_8c_source.html#l00040">init()</a>, <a class="el" href="sfr__eff_8h.html#a171a2ed903417d32792636eb5dc2ddd5">init_clouds()</a>, <a class="el" href="cooling_8c_source.html#l00922">InitCool()</a>, <a class="el" href="lightcone_8c_source.html#l00087">lightcone_init()</a>, <a class="el" href="longrange_8c_source.html#l00021">long_range_init()</a>, <a class="el" href="allvars_8h_source.html#l00157">global_data_all_processes::NTotalInit</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::OutputDir</a>, <a class="el" href="petaio_8c_source.html#l00045">petaio_init()</a>, <a class="el" href="petaio_8c_source.html#l00405">petaio_read_header()</a>, <a class="el" href="system_8c_source.html#l00124">set_random_numbers()</a>, <a class="el" href="begrun_8c_source.html#l00256">set_softenings()</a>, <a class="el" href="begrun_8c_source.html#l00175">set_units()</a>, <a class="el" href="slotsmanager_8c_source.html#l00488">slots_init()</a>, <a class="el" href="slotsmanager_8c_source.html#l00497">slots_set_enabled()</a>, <a class="el" href="allvars_8h_source.html#l00243">global_data_all_processes::StarformationOn</a>, <a class="el" href="allvars_8h_source.html#l00267">global_data_all_processes::Time</a>, <a class="el" href="allvars_8h_source.html#l00288">global_data_all_processes::TimeLimitCPU</a>, and <a class="el" href="walltime_8c_source.html#l00018">walltime_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00031">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="hci_8c.html#addf1946f960a37a37fb2c7ae2f889a2a">hci_init</a>(<a class="code" href="hci_8c.html#a394fed67bae7e3db82a72073a19cc059">HCI_DEFAULT_MANAGER</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#accf0e0ec1acab3f51f583470910049d2">TimeLimitCPU</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ab873614f7b0c09a3b6ac3add6656b723">AutoSnapshotTime</a>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="petaio_8c.html#a2398ab5c3e8c8475d7c625fcac182c5b">petaio_init</a>();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="walltime_8c.html#a03a816f38593bc4adf06efed9fe49697">walltime_init</a>(&amp;<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#af29c17c6e88b798d3dad38b719b817ed">CT</a>);</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="petaio_8c.html#ac7b533afc766345881d11628147375db">petaio_read_header</a>(RestartSnapNum);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="slotsmanager_8c.html#abd89743e398d531f61049c17b07e17e7">slots_init</a>();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">/* Enable the slots: stars and BHs are allocated if there are some,</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">     * or if some will form*/</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ab213f81cb93290e0e240488f3846495b">NTotalInit</a>[0] &gt; 0)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <a class="code" href="slotsmanager_8c.html#a00c59951c41d91d93e7e5c4401aaf4e5">slots_set_enabled</a>(0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structsph__particle__data.html">sph_particle_data</a>));</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ac91a580fac3b17d1a94b2dd20ec3041b">StarformationOn</a> || <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ab213f81cb93290e0e240488f3846495b">NTotalInit</a>[4] &gt; 0)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <a class="code" href="slotsmanager_8c.html#a00c59951c41d91d93e7e5c4401aaf4e5">slots_set_enabled</a>(4, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structstar__particle__data.html">star_particle_data</a>));</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a58fd247c4b2a00487fcdafe9d862428b">BlackHoleOn</a> || <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ab213f81cb93290e0e240488f3846495b">NTotalInit</a>[5] &gt; 0)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="slotsmanager_8c.html#a00c59951c41d91d93e7e5c4401aaf4e5">slots_set_enabled</a>(5, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structbh__particle__data.html">bh_particle_data</a>));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="begrun_8c.html#a9bd0ea05a7f0ebe5321cd19cea8a1091">set_softenings</a>();</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="begrun_8c.html#abc253d7e6685a5245c81819ccc03f1f0">set_units</a>();</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    write_pid_file(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    enable_core_dumps_and_fpu_exceptions();</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="cooling_8c.html#ae51373f12f72a32d01160ad576457d52">InitCool</a>();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#if defined(SFR)</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="sfr__eff_8h.html#a171a2ed903417d32792636eb5dc2ddd5">init_clouds</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="longrange_8c.html#af52079f2c63002aca9463ba0b13727df">long_range_init</a>();</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="system_8c.html#a9cb45ef22cae101906f021fb7a23afbe">set_random_numbers</a>();</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="init_8c.html#ab080cb20bac2a1a6153a84e8cfd15374">init</a>(RestartSnapNum);           <span class="comment">/* ... read in initial model */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#ifdef LIGHTCONE</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="lightcone_8c.html#a3efc2e9b2e1cb0b9abf7e86d27e3e900">lightcone_init</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">Time</a>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="ttc" id="structglobal__data__all__processes_html_ab873614f7b0c09a3b6ac3add6656b723"><div class="ttname"><a href="structglobal__data__all__processes.html#ab873614f7b0c09a3b6ac3add6656b723">global_data_all_processes::AutoSnapshotTime</a></div><div class="ttdeci">double AutoSnapshotTime</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00263">allvars.h:263</a></div></div>
<div class="ttc" id="begrun_8c_html_a9bd0ea05a7f0ebe5321cd19cea8a1091"><div class="ttname"><a href="begrun_8c.html#a9bd0ea05a7f0ebe5321cd19cea8a1091">set_softenings</a></div><div class="ttdeci">static void set_softenings()</div><div class="ttdef"><b>Definition:</b> <a href="begrun_8c_source.html#l00256">begrun.c:256</a></div></div>
<div class="ttc" id="slotsmanager_8c_html_a00c59951c41d91d93e7e5c4401aaf4e5"><div class="ttname"><a href="slotsmanager_8c.html#a00c59951c41d91d93e7e5c4401aaf4e5">slots_set_enabled</a></div><div class="ttdeci">void slots_set_enabled(int ptype, size_t elsize)</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8c_source.html#l00497">slotsmanager.c:497</a></div></div>
<div class="ttc" id="walltime_8c_html_a03a816f38593bc4adf06efed9fe49697"><div class="ttname"><a href="walltime_8c.html#a03a816f38593bc4adf06efed9fe49697">walltime_init</a></div><div class="ttdeci">void walltime_init(struct ClockTable *ct)</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8c_source.html#l00018">walltime.c:18</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_accf0e0ec1acab3f51f583470910049d2"><div class="ttname"><a href="structglobal__data__all__processes.html#accf0e0ec1acab3f51f583470910049d2">global_data_all_processes::TimeLimitCPU</a></div><div class="ttdeci">double TimeLimitCPU</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00288">allvars.h:288</a></div></div>
<div class="ttc" id="hci_8c_html_addf1946f960a37a37fb2c7ae2f889a2a"><div class="ttname"><a href="hci_8c.html#addf1946f960a37a37fb2c7ae2f889a2a">hci_init</a></div><div class="ttdeci">void hci_init(HCIManager *manager, char *prefix, double WallClockTimeLimit, double AutoCheckPointTime)</div><div class="ttdef"><b>Definition:</b> <a href="hci_8c_source.html#l00030">hci.c:30</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a58fd247c4b2a00487fcdafe9d862428b"><div class="ttname"><a href="structglobal__data__all__processes.html#a58fd247c4b2a00487fcdafe9d862428b">global_data_all_processes::BlackHoleOn</a></div><div class="ttdeci">int BlackHoleOn</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00242">allvars.h:242</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_af29c17c6e88b798d3dad38b719b817ed"><div class="ttname"><a href="structglobal__data__all__processes.html#af29c17c6e88b798d3dad38b719b817ed">global_data_all_processes::CT</a></div><div class="ttdeci">struct ClockTable CT</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00289">allvars.h:289</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a25b9da73fdcbdc45fbe4a6ad45479f09"><div class="ttname"><a href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">global_data_all_processes::Time</a></div><div class="ttdeci">double Time</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00267">allvars.h:267</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_ac91a580fac3b17d1a94b2dd20ec3041b"><div class="ttname"><a href="structglobal__data__all__processes.html#ac91a580fac3b17d1a94b2dd20ec3041b">global_data_all_processes::StarformationOn</a></div><div class="ttdeci">int StarformationOn</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00243">allvars.h:243</a></div></div>
<div class="ttc" id="system_8c_html_a9cb45ef22cae101906f021fb7a23afbe"><div class="ttname"><a href="system_8c.html#a9cb45ef22cae101906f021fb7a23afbe">set_random_numbers</a></div><div class="ttdeci">void set_random_numbers(void)</div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00124">system.c:124</a></div></div>
<div class="ttc" id="petaio_8c_html_ac7b533afc766345881d11628147375db"><div class="ttname"><a href="petaio_8c.html#ac7b533afc766345881d11628147375db">petaio_read_header</a></div><div class="ttdeci">void petaio_read_header(int num)</div><div class="ttdef"><b>Definition:</b> <a href="petaio_8c_source.html#l00405">petaio.c:405</a></div></div>
<div class="ttc" id="init_8c_html_ab080cb20bac2a1a6153a84e8cfd15374"><div class="ttname"><a href="init_8c.html#ab080cb20bac2a1a6153a84e8cfd15374">init</a></div><div class="ttdeci">void init(int RestartSnapNum)</div><div class="ttdef"><b>Definition:</b> <a href="init_8c_source.html#l00040">init.c:40</a></div></div>
<div class="ttc" id="lightcone_8c_html_a3efc2e9b2e1cb0b9abf7e86d27e3e900"><div class="ttname"><a href="lightcone_8c.html#a3efc2e9b2e1cb0b9abf7e86d27e3e900">lightcone_init</a></div><div class="ttdeci">void lightcone_init(double timeBegin)</div><div class="ttdef"><b>Definition:</b> <a href="lightcone_8c_source.html#l00087">lightcone.c:87</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aebda5d1b80cfb767b9668d7858c36bcc"><div class="ttname"><a href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">global_data_all_processes::OutputDir</a></div><div class="ttdeci">char OutputDir[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="longrange_8c_html_af52079f2c63002aca9463ba0b13727df"><div class="ttname"><a href="longrange_8c.html#af52079f2c63002aca9463ba0b13727df">long_range_init</a></div><div class="ttdeci">void long_range_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="longrange_8c_source.html#l00021">longrange.c:21</a></div></div>
<div class="ttc" id="sfr__eff_8h_html_a171a2ed903417d32792636eb5dc2ddd5"><div class="ttname"><a href="sfr__eff_8h.html#a171a2ed903417d32792636eb5dc2ddd5">init_clouds</a></div><div class="ttdeci">void init_clouds(void)</div></div>
<div class="ttc" id="petaio_8c_html_a2398ab5c3e8c8475d7c625fcac182c5b"><div class="ttname"><a href="petaio_8c.html#a2398ab5c3e8c8475d7c625fcac182c5b">petaio_init</a></div><div class="ttdeci">void petaio_init()</div><div class="ttdef"><b>Definition:</b> <a href="petaio_8c_source.html#l00045">petaio.c:45</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_ab213f81cb93290e0e240488f3846495b"><div class="ttname"><a href="structglobal__data__all__processes.html#ab213f81cb93290e0e240488f3846495b">global_data_all_processes::NTotalInit</a></div><div class="ttdeci">int64_t NTotalInit[6]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00157">allvars.h:157</a></div></div>
<div class="ttc" id="structbh__particle__data_html"><div class="ttname"><a href="structbh__particle__data.html">bh_particle_data</a></div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00032">slotsmanager.h:32</a></div></div>
<div class="ttc" id="cooling_8c_html_ae51373f12f72a32d01160ad576457d52"><div class="ttname"><a href="cooling_8c.html#ae51373f12f72a32d01160ad576457d52">InitCool</a></div><div class="ttdeci">void InitCool(void)</div><div class="ttdef"><b>Definition:</b> <a href="cooling_8c_source.html#l00922">cooling.c:922</a></div></div>
<div class="ttc" id="structstar__particle__data_html"><div class="ttname"><a href="structstar__particle__data.html">star_particle_data</a></div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00062">slotsmanager.h:62</a></div></div>
<div class="ttc" id="structsph__particle__data_html"><div class="ttname"><a href="structsph__particle__data.html">sph_particle_data</a></div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00073">slotsmanager.h:73</a></div></div>
<div class="ttc" id="hci_8c_html_a394fed67bae7e3db82a72073a19cc059"><div class="ttname"><a href="hci_8c.html#a394fed67bae7e3db82a72073a19cc059">HCI_DEFAULT_MANAGER</a></div><div class="ttdeci">HCIManager HCI_DEFAULT_MANAGER[1]</div><div class="ttdef"><b>Definition:</b> <a href="hci_8c_source.html#l00011">hci.c:11</a></div></div>
<div class="ttc" id="slotsmanager_8c_html_abd89743e398d531f61049c17b07e17e7"><div class="ttname"><a href="slotsmanager_8c.html#abd89743e398d531f61049c17b07e17e7">slots_init</a></div><div class="ttdeci">void slots_init()</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8c_source.html#l00488">slotsmanager.c:488</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
<div class="ttc" id="begrun_8c_html_abc253d7e6685a5245c81819ccc03f1f0"><div class="ttname"><a href="begrun_8c.html#abc253d7e6685a5245c81819ccc03f1f0">set_units</a></div><div class="ttdeci">static void set_units()</div><div class="ttdef"><b>Definition:</b> <a href="begrun_8c_source.html#l00175">begrun.c:175</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a74dc0e5e9eefe11fc8434b62de573146_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_a74dc0e5e9eefe11fc8434b62de573146_icgraph.svg" width="122" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa1abb9ee0e0a43ec19cdaa55c8ecd43c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1abb9ee0e0a43ec19cdaa55c8ecd43c">&#9670;&nbsp;</a></span>close_outputfiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void close_outputfiles </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function closes the global log-files. </p>

<p class="definition">Definition at line <a class="el" href="begrun_8c_source.html#l00152">152</a> of file <a class="el" href="begrun_8c_source.html">begrun.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="allvars_8c_source.html#l00031">FdCPU</a>, <a class="el" href="allvars_8c_source.html#l00031">FdEnergy</a>, <a class="el" href="allvars_8h_source.html#l00354">global_data_all_processes::OutputEnergyDebug</a>, and <a class="el" href="allvars_8c_source.html#l00024">ThisTask</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00031">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> != 0)       <span class="comment">/* only the root processors writes to the log files */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    fclose(<a class="code" href="allvars_8c.html#aeaf0bacb2c9ca3f63d21ce9ca26b4992">FdCPU</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#af843a960c1f9b4cf62a6d7c61f518e90">OutputEnergyDebug</a>)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        fclose(<a class="code" href="allvars_8c.html#a0230903e40950ac42dbff71dddd12176">FdEnergy</a>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#ifdef SFR</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    fclose(FdSfr);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#ifdef BLACK_HOLES</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    fclose(FdBlackHoles);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div><div class="ttc" id="allvars_8c_html_aeaf0bacb2c9ca3f63d21ce9ca26b4992"><div class="ttname"><a href="allvars_8c.html#aeaf0bacb2c9ca3f63d21ce9ca26b4992">FdCPU</a></div><div class="ttdeci">FILE * FdCPU</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00031">allvars.c:31</a></div></div>
<div class="ttc" id="allvars_8c_html_a0230903e40950ac42dbff71dddd12176"><div class="ttname"><a href="allvars_8c.html#a0230903e40950ac42dbff71dddd12176">FdEnergy</a></div><div class="ttdeci">FILE * FdEnergy</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00031">allvars.c:31</a></div></div>
<div class="ttc" id="allvars_8c_html_a52c8c7d2abff436111942e02c5bb466a"><div class="ttname"><a href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a></div><div class="ttdeci">int ThisTask</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00024">allvars.c:24</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_af843a960c1f9b4cf62a6d7c61f518e90"><div class="ttname"><a href="structglobal__data__all__processes.html#af843a960c1f9b4cf62a6d7c61f518e90">global_data_all_processes::OutputEnergyDebug</a></div><div class="ttdeci">int OutputEnergyDebug</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00354">allvars.h:354</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_aa1abb9ee0e0a43ec19cdaa55c8ecd43c_icgraph.svg" width="131" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8ce8ad3893801ac7d380efd9b7ef26d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ce8ad3893801ac7d380efd9b7ef26d3">&#9670;&nbsp;</a></span>density()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void density </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="density_8c_source.html#l00106">106</a> of file <a class="el" href="density_8c_source.html">density.c</a>.</p>

<p class="reference">References <a class="el" href="density_8c_source.html#l00120">density_internal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="run_8c_source.html#l00190">compute_accelerations()</a>, and <a class="el" href="init_8c_source.html#l00181">setup_smoothinglengths()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">/* recompute hsml and pre hydro quantities */</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="density_8c.html#a69886540d0642590a0022fc14ce61f06">density_internal</a>(1);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div><div class="ttc" id="density_8c_html_a69886540d0642590a0022fc14ce61f06"><div class="ttname"><a href="density_8c.html#a69886540d0642590a0022fc14ce61f06">density_internal</a></div><div class="ttdeci">static void density_internal(int update_hsml)</div><div class="ttdef"><b>Definition:</b> <a href="density_8c_source.html#l00120">density.c:120</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a8ce8ad3893801ac7d380efd9b7ef26d3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a8ce8ad3893801ac7d380efd9b7ef26d3_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a137ca78a0bd40fa7a75438e90e4f66a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a137ca78a0bd40fa7a75438e90e4f66a8">&#9670;&nbsp;</a></span>density_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void density_update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="density_8c_source.html#l00113">113</a> of file <a class="el" href="density_8c_source.html">density.c</a>.</p>

<p class="reference">References <a class="el" href="density_8c_source.html#l00120">density_internal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8c_source.html#l00181">setup_smoothinglengths()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">/* recompute pre hydro quantities without computing hsml */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="density_8c.html#a69886540d0642590a0022fc14ce61f06">density_internal</a>(0);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div><div class="ttc" id="density_8c_html_a69886540d0642590a0022fc14ce61f06"><div class="ttname"><a href="density_8c.html#a69886540d0642590a0022fc14ce61f06">density_internal</a></div><div class="ttdeci">static void density_internal(int update_hsml)</div><div class="ttdef"><b>Definition:</b> <a href="density_8c_source.html#l00120">density.c:120</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a137ca78a0bd40fa7a75438e90e4f66a8_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a137ca78a0bd40fa7a75438e90e4f66a8_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a649bd481c6ef92bf202abfe0fe15449a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a649bd481c6ef92bf202abfe0fe15449a">&#9670;&nbsp;</a></span>dump_snapshot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dump_snapshot </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io_8c_source.html#l00050">50</a> of file <a class="el" href="io_8c_source.html">io.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::OutputDir</a>, and <a class="el" href="petaio_8c_source.html#l00061">petaio_save_snapshot()</a>.</p>

<p class="reference">Referenced by <a class="el" href="timestep_8c_source.html#l00131">find_timesteps()</a>, and <a class="el" href="forcetree_8c_source.html#l00121">force_tree_build()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="petaio_8c.html#a91ff9324adbdc5b2652db62e161042b8">petaio_save_snapshot</a>(<span class="stringliteral">&quot;%s/CRASH-DUMP&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div><div class="ttc" id="petaio_8c_html_a91ff9324adbdc5b2652db62e161042b8"><div class="ttname"><a href="petaio_8c.html#a91ff9324adbdc5b2652db62e161042b8">petaio_save_snapshot</a></div><div class="ttdeci">void petaio_save_snapshot(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="petaio_8c_source.html#l00061">petaio.c:61</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aebda5d1b80cfb767b9668d7858c36bcc"><div class="ttname"><a href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">global_data_all_processes::OutputDir</a></div><div class="ttdeci">char OutputDir[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a649bd481c6ef92bf202abfe0fe15449a_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a649bd481c6ef92bf202abfe0fe15449a_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ae903322da17c6875ab606b032b918099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae903322da17c6875ab606b032b918099">&#9670;&nbsp;</a></span>energy_statistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void energy_statistics </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine first calls a computation of various global quantities of the particle distribution, and then writes some statistics about the energies in the various particle components to the file FdEnergy. </p>

<p class="definition">Definition at line <a class="el" href="global_8c_source.html#l00190">190</a> of file <a class="el" href="global_8c_source.html">global.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="global_8c_source.html#l00046">compute_global_quantities_of_system()</a>, <a class="el" href="global_8c_source.html#l00021">state_of_system::EnergyInt</a>, <a class="el" href="global_8c_source.html#l00033">state_of_system::EnergyIntComp</a>, <a class="el" href="global_8c_source.html#l00019">state_of_system::EnergyKin</a>, <a class="el" href="global_8c_source.html#l00031">state_of_system::EnergyKinComp</a>, <a class="el" href="global_8c_source.html#l00020">state_of_system::EnergyPot</a>, <a class="el" href="global_8c_source.html#l00032">state_of_system::EnergyPotComp</a>, <a class="el" href="allvars_8c_source.html#l00031">FdEnergy</a>, <a class="el" href="global_8c_source.html#l00027">state_of_system::MassComp</a>, <a class="el" href="endrun_8c_source.html#l00226">message()</a>, <a class="el" href="global_8c_source.html#l00029">state_of_system::TemperatureComp</a>, <a class="el" href="allvars_8c_source.html#l00024">ThisTask</a>, and <a class="el" href="allvars_8h_source.html#l00267">global_data_all_processes::Time</a>.</p>

<p class="reference">Referenced by <a class="el" href="run_8c_source.html#l00190">compute_accelerations()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keyword">struct </span><a class="code" href="structstate__of__system.html">state_of_system</a> SysState = <a class="code" href="global_8c.html#ae8e7beaf9e92a3759146c0554e621846">compute_global_quantities_of_system</a>();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0, <span class="stringliteral">&quot;Time %g Mean Temperature of Gas %g\n&quot;</span>,</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">Time</a>, SysState.<a class="code" href="structstate__of__system.html#abbe56b9b2254a1b89388c267d4d82b78">TemperatureComp</a>[0]);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> == 0)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        fprintf(<a class="code" href="allvars_8c.html#a0230903e40950ac42dbff71dddd12176">FdEnergy</a>,</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="stringliteral">&quot;%g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g %g\n&quot;</span>,</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">Time</a>, SysState.<a class="code" href="structstate__of__system.html#abbe56b9b2254a1b89388c267d4d82b78">TemperatureComp</a>[0], SysState.<a class="code" href="structstate__of__system.html#a8ee567f49007a65817989a252d8c4f90">EnergyInt</a>, SysState.<a class="code" href="structstate__of__system.html#aece07698cdbe00520fcb92ad9f04d435">EnergyPot</a>, SysState.<a class="code" href="structstate__of__system.html#a92ed1ad5f1a02586030b21f5f3e560ec">EnergyKin</a>, SysState.<a class="code" href="structstate__of__system.html#af96bea4b9655900eef6d7734629241a7">EnergyIntComp</a>[0],</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#af495e90a93989d10e7f138c33c5cdad3">EnergyPotComp</a>[0], SysState.<a class="code" href="structstate__of__system.html#a8b776a503b441fc690c0940e3386a2fb">EnergyKinComp</a>[0], SysState.<a class="code" href="structstate__of__system.html#af96bea4b9655900eef6d7734629241a7">EnergyIntComp</a>[1],</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#af495e90a93989d10e7f138c33c5cdad3">EnergyPotComp</a>[1], SysState.<a class="code" href="structstate__of__system.html#a8b776a503b441fc690c0940e3386a2fb">EnergyKinComp</a>[1], SysState.<a class="code" href="structstate__of__system.html#af96bea4b9655900eef6d7734629241a7">EnergyIntComp</a>[2],</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#af495e90a93989d10e7f138c33c5cdad3">EnergyPotComp</a>[2], SysState.<a class="code" href="structstate__of__system.html#a8b776a503b441fc690c0940e3386a2fb">EnergyKinComp</a>[2], SysState.<a class="code" href="structstate__of__system.html#af96bea4b9655900eef6d7734629241a7">EnergyIntComp</a>[3],</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#af495e90a93989d10e7f138c33c5cdad3">EnergyPotComp</a>[3], SysState.<a class="code" href="structstate__of__system.html#a8b776a503b441fc690c0940e3386a2fb">EnergyKinComp</a>[3], SysState.<a class="code" href="structstate__of__system.html#af96bea4b9655900eef6d7734629241a7">EnergyIntComp</a>[4],</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#af495e90a93989d10e7f138c33c5cdad3">EnergyPotComp</a>[4], SysState.<a class="code" href="structstate__of__system.html#a8b776a503b441fc690c0940e3386a2fb">EnergyKinComp</a>[4], SysState.<a class="code" href="structstate__of__system.html#af96bea4b9655900eef6d7734629241a7">EnergyIntComp</a>[5],</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#af495e90a93989d10e7f138c33c5cdad3">EnergyPotComp</a>[5], SysState.<a class="code" href="structstate__of__system.html#a8b776a503b441fc690c0940e3386a2fb">EnergyKinComp</a>[5], SysState.<a class="code" href="structstate__of__system.html#a760dbd458028ff092d8fab04f54f90ff">MassComp</a>[0],</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#a760dbd458028ff092d8fab04f54f90ff">MassComp</a>[1], SysState.<a class="code" href="structstate__of__system.html#a760dbd458028ff092d8fab04f54f90ff">MassComp</a>[2], SysState.<a class="code" href="structstate__of__system.html#a760dbd458028ff092d8fab04f54f90ff">MassComp</a>[3], SysState.<a class="code" href="structstate__of__system.html#a760dbd458028ff092d8fab04f54f90ff">MassComp</a>[4],</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                SysState.<a class="code" href="structstate__of__system.html#a760dbd458028ff092d8fab04f54f90ff">MassComp</a>[5]);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        fflush(<a class="code" href="allvars_8c.html#a0230903e40950ac42dbff71dddd12176">FdEnergy</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="ttc" id="structstate__of__system_html_af495e90a93989d10e7f138c33c5cdad3"><div class="ttname"><a href="structstate__of__system.html#af495e90a93989d10e7f138c33c5cdad3">state_of_system::EnergyPotComp</a></div><div class="ttdeci">double EnergyPotComp[6]</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00032">global.c:32</a></div></div>
<div class="ttc" id="structstate__of__system_html_af96bea4b9655900eef6d7734629241a7"><div class="ttname"><a href="structstate__of__system.html#af96bea4b9655900eef6d7734629241a7">state_of_system::EnergyIntComp</a></div><div class="ttdeci">double EnergyIntComp[6]</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00033">global.c:33</a></div></div>
<div class="ttc" id="structstate__of__system_html_a760dbd458028ff092d8fab04f54f90ff"><div class="ttname"><a href="structstate__of__system.html#a760dbd458028ff092d8fab04f54f90ff">state_of_system::MassComp</a></div><div class="ttdeci">double MassComp[6]</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00027">global.c:27</a></div></div>
<div class="ttc" id="allvars_8c_html_a0230903e40950ac42dbff71dddd12176"><div class="ttname"><a href="allvars_8c.html#a0230903e40950ac42dbff71dddd12176">FdEnergy</a></div><div class="ttdeci">FILE * FdEnergy</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00031">allvars.c:31</a></div></div>
<div class="ttc" id="allvars_8c_html_a52c8c7d2abff436111942e02c5bb466a"><div class="ttname"><a href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a></div><div class="ttdeci">int ThisTask</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00024">allvars.c:24</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a25b9da73fdcbdc45fbe4a6ad45479f09"><div class="ttname"><a href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">global_data_all_processes::Time</a></div><div class="ttdeci">double Time</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00267">allvars.h:267</a></div></div>
<div class="ttc" id="structstate__of__system_html_aece07698cdbe00520fcb92ad9f04d435"><div class="ttname"><a href="structstate__of__system.html#aece07698cdbe00520fcb92ad9f04d435">state_of_system::EnergyPot</a></div><div class="ttdeci">double EnergyPot</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00020">global.c:20</a></div></div>
<div class="ttc" id="structstate__of__system_html"><div class="ttname"><a href="structstate__of__system.html">state_of_system</a></div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00016">global.c:16</a></div></div>
<div class="ttc" id="structstate__of__system_html_a8b776a503b441fc690c0940e3386a2fb"><div class="ttname"><a href="structstate__of__system.html#a8b776a503b441fc690c0940e3386a2fb">state_of_system::EnergyKinComp</a></div><div class="ttdeci">double EnergyKinComp[6]</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00031">global.c:31</a></div></div>
<div class="ttc" id="endrun_8c_html_a6567cd867c5549fb6586e19ccd819764"><div class="ttname"><a href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a></div><div class="ttdeci">void message(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00226">endrun.c:226</a></div></div>
<div class="ttc" id="structstate__of__system_html_a92ed1ad5f1a02586030b21f5f3e560ec"><div class="ttname"><a href="structstate__of__system.html#a92ed1ad5f1a02586030b21f5f3e560ec">state_of_system::EnergyKin</a></div><div class="ttdeci">double EnergyKin</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00019">global.c:19</a></div></div>
<div class="ttc" id="structstate__of__system_html_abbe56b9b2254a1b89388c267d4d82b78"><div class="ttname"><a href="structstate__of__system.html#abbe56b9b2254a1b89388c267d4d82b78">state_of_system::TemperatureComp</a></div><div class="ttdeci">double TemperatureComp[6]</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00029">global.c:29</a></div></div>
<div class="ttc" id="structstate__of__system_html_a8ee567f49007a65817989a252d8c4f90"><div class="ttname"><a href="structstate__of__system.html#a8ee567f49007a65817989a252d8c4f90">state_of_system::EnergyInt</a></div><div class="ttdeci">double EnergyInt</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00021">global.c:21</a></div></div>
<div class="ttc" id="global_8c_html_ae8e7beaf9e92a3759146c0554e621846"><div class="ttname"><a href="global_8c.html#ae8e7beaf9e92a3759146c0554e621846">compute_global_quantities_of_system</a></div><div class="ttdeci">struct state_of_system compute_global_quantities_of_system(void)</div><div class="ttdef"><b>Definition:</b> <a href="global_8c_source.html#l00046">global.c:46</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_ae903322da17c6875ab606b032b918099_cgraph.svg" width="542" height="454"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_ae903322da17c6875ab606b032b918099_icgraph.svg" width="167" height="518"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a946405237bbb09c2d6560930abfa5576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a946405237bbb09c2d6560930abfa5576">&#9670;&nbsp;</a></span>find_last_snapnum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int find_last_snapnum </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io_8c_source.html#l00076">76</a> of file <a class="el" href="io_8c_source.html">io.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="endrun_8c_source.html#l00210">endrun()</a>, <a class="el" href="cooling_8c.html#a600b792d6d2ff2e71096dfa60d97a3b0">fd</a>, <a class="el" href="endrun_8c_source.html#l00226">message()</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::OutputDir</a>, and <a class="el" href="allvars_8c_source.html#l00024">ThisTask</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00031">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">/* FIXME: this is very fragile; should be fine */</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">int</span> snapnumber = -1;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> == 0) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordtype">char</span> buf[1024];</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        sprintf(buf, <span class="stringliteral">&quot;%s/Snapshots.txt&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        FILE * <a class="code" href="cooling_8c.html#a600b792d6d2ff2e71096dfa60d97a3b0">fd</a> = fopen(buf, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">if</span>(fd == NULL) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            snapnumber = -1;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordtype">double</span> time;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordtype">char</span> ch;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="keywordtype">int</span> line = 0;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">while</span> (!feof(fd)) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordtype">int</span> n = fscanf(fd, <span class="stringliteral">&quot;%d %lg%c&quot;</span>, &amp;snapnumber, &amp;time, &amp;ch);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(1, <span class="stringliteral">&quot;n = %d\n&quot;</span>, n);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">if</span> (n == 3 &amp;&amp; ch == <span class="charliteral">&#39;\n&#39;</span>) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    line ++;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">if</span> (n == -1 &amp;&amp; feof(fd)) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(1, <span class="stringliteral">&quot;Failed to parse %s:%d for the last snap shot number.\n&quot;</span>, buf, line);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            fclose(fd);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    MPI_Bcast(&amp;snapnumber, 1, MPI_INT, 0, MPI_COMM_WORLD);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> snapnumber;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div><div class="ttc" id="endrun_8c_html_ad963d7efdb9f10f7a2298c8ccd222ab0"><div class="ttname"><a href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a></div><div class="ttdeci">void endrun(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00210">endrun.c:210</a></div></div>
<div class="ttc" id="cooling_8c_html_a600b792d6d2ff2e71096dfa60d97a3b0"><div class="ttname"><a href="cooling_8c.html#a600b792d6d2ff2e71096dfa60d97a3b0">fd</a></div><div class="ttdeci">FILE * fd</div></div>
<div class="ttc" id="allvars_8c_html_a52c8c7d2abff436111942e02c5bb466a"><div class="ttname"><a href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a></div><div class="ttdeci">int ThisTask</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00024">allvars.c:24</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aebda5d1b80cfb767b9668d7858c36bcc"><div class="ttname"><a href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">global_data_all_processes::OutputDir</a></div><div class="ttdeci">char OutputDir[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="endrun_8c_html_a6567cd867c5549fb6586e19ccd819764"><div class="ttname"><a href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a></div><div class="ttdeci">void message(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00226">endrun.c:226</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_a946405237bbb09c2d6560930abfa5576_cgraph.svg" width="532" height="370"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_a946405237bbb09c2d6560930abfa5576_icgraph.svg" width="142" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3890f7b7605d1abaf3cd23eeca5bcdd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3890f7b7605d1abaf3cd23eeca5bcdd5">&#9670;&nbsp;</a></span>grav_short_tree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void grav_short_tree </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function computes the gravitational forces for all active particles. If needed, a new tree is constructed, otherwise the dynamically updated tree is used. Particles are only exported to other processors when really needed, thereby allowing a good use of the communication buffer. </p>

<p class="definition">Definition at line <a class="el" href="gravshort-tree_8c_source.html#l00045">45</a> of file <a class="el" href="gravshort-tree_8c_source.html">gravshort-tree.c</a>.</p>

<p class="reference">References <a class="el" href="timestep_8c_source.html#l00040">ActiveParticle</a>, <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="mymalloc_8h_source.html#l00029">AllocatedBytes</a>, <a class="el" href="treewalk_8h_source.html#l00075">TreeWalk::ev_label</a>, <a class="el" href="treewalk_8h_source.html#l00087">TreeWalk::fill</a>, <a class="el" href="gravshort-tree_8c_source.html#l00110">force_treeev_shortrange()</a>, <a class="el" href="gravshort_8h_source.html#l00050">grav_short_copy()</a>, <a class="el" href="gravshort_8h_source.html#l00028">grav_short_haswork()</a>, <a class="el" href="gravshort_8h_source.html#l00034">grav_short_postprocess()</a>, <a class="el" href="gravshort_8h_source.html#l00066">grav_short_reduce()</a>, <a class="el" href="treewalk_8h_source.html#l00086">TreeWalk::haswork</a>, <a class="el" href="endrun_8c_source.html#l00226">message()</a>, <a class="el" href="timestep_8c_source.html#l00039">NumActiveParticle</a>, <a class="el" href="treewalk_8h_source.html#l00090">TreeWalk::postprocess</a>, <a class="el" href="treewalk_8h_source.html#l00079">TreeWalk::query_type_elsize</a>, <a class="el" href="treewalk_8h_source.html#l00088">TreeWalk::reduce</a>, <a class="el" href="treewalk_8h_source.html#l00080">TreeWalk::result_type_elsize</a>, <a class="el" href="treewalk_8h_source.html#l00104">TreeWalk::timecommsumm1</a>, <a class="el" href="treewalk_8h_source.html#l00105">TreeWalk::timecommsumm2</a>, <a class="el" href="treewalk_8h_source.html#l00101">TreeWalk::timecomp1</a>, <a class="el" href="treewalk_8h_source.html#l00102">TreeWalk::timecomp2</a>, <a class="el" href="treewalk_8h_source.html#l00103">TreeWalk::timecomp3</a>, <a class="el" href="treewalk_8h_source.html#l00099">TreeWalk::timewait1</a>, <a class="el" href="treewalk_8h_source.html#l00100">TreeWalk::timewait2</a>, <a class="el" href="allvars_8h_source.html#l00241">global_data_all_processes::TreeGravOn</a>, <a class="el" href="treewalk_8c_source.html#l00543">treewalk_run()</a>, <a class="el" href="treewalk_8h_source.html#l00093">TreeWalk::UseNodeList</a>, <a class="el" href="treewalk_8h_source.html#l00085">TreeWalk::visit</a>, <a class="el" href="walltime_8h_source.html#l00006">walltime_add</a>, <a class="el" href="walltime_8h_source.html#l00003">WALLTIME_IGNORE</a>, and <a class="el" href="walltime_8h_source.html#l00005">walltime_measure</a>.</p>

<p class="reference">Referenced by <a class="el" href="run_8c_source.html#l00190">compute_accelerations()</a>, and <a class="el" href="runtests_8c_source.html#l00027">runtests()</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordtype">double</span> timeall = 0;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">double</span> timetree, timewait, timecomm;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a3c745b3e1f87c68f52fab5ab0c34b1e4">TreeGravOn</a>)</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="structTreeWalk.html">TreeWalk</a> tw[1] = {0};</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a1bc94a4f19b597a6328f7048da73d8af">ev_label</a> = <span class="stringliteral">&quot;FORCETREE_SHORTRANGE&quot;</span>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ab4e96e67f2e72ac33dca9dd06cdac6c0">visit</a> = (<a class="code" href="treewalk_8h.html#a01b18ab132aa3a45e2f2bed8aef94633">TreeWalkVisitFunction</a>) <a class="code" href="gravshort-tree_8c.html#a3ffcbdc6a83731eeae868eb50429d837">force_treeev_shortrange</a>;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a2f6bc842f407a44d99de52e9b5140454">haswork</a> = <a class="code" href="gravshort_8h.html#a0d8eb43f2856198175c662d89d134ed0">grav_short_haswork</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#aa08a0586a68d1f4f87e0caa1e59dcc5e">reduce</a> = (<a class="code" href="treewalk_8h.html#a2b5a07b25001ac6e9e628d4eb0493b8c">TreeWalkReduceResultFunction</a>) <a class="code" href="gravshort_8h.html#abb010959059906357308b409ed53c326">grav_short_reduce</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#a8c4dcda60d680c3d56423fca8647472f">postprocess</a> = (<a class="code" href="treewalk_8h.html#a18ae30498477c2521e95251e204e8928">TreeWalkProcessFunction</a>) <a class="code" href="gravshort_8h.html#ada1a1a082fdcaa4f27251021a8eb87c9">grav_short_postprocess</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#adc62eb856144faf75a8759af94f4b92f">UseNodeList</a> = 1;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#affd5eae4b5a63dcce236ac15b00b4c7c">query_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkQueryGravShort.html">TreeWalkQueryGravShort</a>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ac8c67faaf2c360ed510c4508f11f7c2d">result_type_elsize</a> = <span class="keyword">sizeof</span>(<a class="code" href="structTreeWalkResultGravShort.html">TreeWalkResultGravShort</a>);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    tw-&gt;<a class="code" href="structTreeWalk.html#ad0b91dafd46de132917e7993869514c5">fill</a> = (<a class="code" href="treewalk_8h.html#ac9a8ade7817c58b83859399364deb1a1">TreeWalkFillQueryFunction</a>) <a class="code" href="gravshort_8h.html#aad791aedc4780df1ac22425fed09862b">grav_short_copy</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<span class="stringliteral">&quot;/Misc&quot;</span>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">/* allocate buffers to arrange communication */</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0, <span class="stringliteral">&quot;Begin tree force.  (presently allocated=%g MB)\n&quot;</span>, <a class="code" href="mymalloc_8h.html#a244704ad36fedd917b16cf31b2565e88">AllocatedBytes</a> / (1024.0 * 1024.0));</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<span class="stringliteral">&quot;/Misc&quot;</span>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="treewalk_8c.html#aa6772bdbc1552278ca7dae6a9adb031d">treewalk_run</a>(tw, <a class="code" href="timestep_8c.html#a1076ffdac0ece6476524e3fd900d39fc">ActiveParticle</a>, <a class="code" href="timestep_8c.html#a234d3f841781f50a25da4e8da82a0d32">NumActiveParticle</a>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">/* now add things for comoving integration */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0, <span class="stringliteral">&quot;tree is done.\n&quot;</span>);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">/* Now the force computation is finished */</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">/*  gather some diagnostic information */</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    timetree = tw-&gt;<a class="code" href="structTreeWalk.html#ada69256fab1ba3b0e5ff0f837f749b2e">timecomp1</a> + tw-&gt;<a class="code" href="structTreeWalk.html#a6518c361d396be49a9d1c676d8769802">timecomp2</a> + tw-&gt;<a class="code" href="structTreeWalk.html#a714d0465e0498a5a8d0b698d37348ce6">timecomp3</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    timewait = tw-&gt;<a class="code" href="structTreeWalk.html#ae62aa594cbe693d40de9334cc0f7c820">timewait1</a> + tw-&gt;<a class="code" href="structTreeWalk.html#aacf67d9ea224563ae4006114d97e473c">timewait2</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    timecomm= tw-&gt;<a class="code" href="structTreeWalk.html#a80f3ba2d463ce192ccb0f42eed264f56">timecommsumm1</a> + tw-&gt;<a class="code" href="structTreeWalk.html#ae663d6653b464f02c95c57ae4a5bdd3a">timecommsumm2</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/Walk1&quot;</span>, tw-&gt;<a class="code" href="structTreeWalk.html#ada69256fab1ba3b0e5ff0f837f749b2e">timecomp1</a>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/Walk2&quot;</span>, tw-&gt;<a class="code" href="structTreeWalk.html#a6518c361d396be49a9d1c676d8769802">timecomp2</a>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/PostProcess&quot;</span>, tw-&gt;<a class="code" href="structTreeWalk.html#a714d0465e0498a5a8d0b698d37348ce6">timecomp3</a>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/Send&quot;</span>, tw-&gt;<a class="code" href="structTreeWalk.html#a80f3ba2d463ce192ccb0f42eed264f56">timecommsumm1</a>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/Recv&quot;</span>, tw-&gt;<a class="code" href="structTreeWalk.html#ae663d6653b464f02c95c57ae4a5bdd3a">timecommsumm2</a>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/Wait1&quot;</span>, tw-&gt;<a class="code" href="structTreeWalk.html#ae62aa594cbe693d40de9334cc0f7c820">timewait1</a>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/Wait2&quot;</span>, tw-&gt;<a class="code" href="structTreeWalk.html#aacf67d9ea224563ae4006114d97e473c">timewait2</a>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    timeall = <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<a class="code" href="walltime_8h.html#a5cedff8706bf3a249bd5e3c365b67964">WALLTIME_IGNORE</a>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a>(<span class="stringliteral">&quot;/Tree/Misc&quot;</span>, timeall - (timetree + timewait + timecomm));</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div><div class="ttc" id="structglobal__data__all__processes_html_a3c745b3e1f87c68f52fab5ab0c34b1e4"><div class="ttname"><a href="structglobal__data__all__processes.html#a3c745b3e1f87c68f52fab5ab0c34b1e4">global_data_all_processes::TreeGravOn</a></div><div class="ttdeci">int TreeGravOn</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00241">allvars.h:241</a></div></div>
<div class="ttc" id="structTreeWalk_html_ae663d6653b464f02c95c57ae4a5bdd3a"><div class="ttname"><a href="structTreeWalk.html#ae663d6653b464f02c95c57ae4a5bdd3a">TreeWalk::timecommsumm2</a></div><div class="ttdeci">double timecommsumm2</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00105">treewalk.h:105</a></div></div>
<div class="ttc" id="structTreeWalkResultGravShort_html"><div class="ttname"><a href="structTreeWalkResultGravShort.html">TreeWalkResultGravShort</a></div><div class="ttdef"><b>Definition:</b> <a href="gravshort_8h_source.html#l00020">gravshort.h:20</a></div></div>
<div class="ttc" id="mymalloc_8h_html_a244704ad36fedd917b16cf31b2565e88"><div class="ttname"><a href="mymalloc_8h.html#a244704ad36fedd917b16cf31b2565e88">AllocatedBytes</a></div><div class="ttdeci">#define AllocatedBytes</div><div class="ttdef"><b>Definition:</b> <a href="mymalloc_8h_source.html#l00029">mymalloc.h:29</a></div></div>
<div class="ttc" id="structTreeWalk_html_aa08a0586a68d1f4f87e0caa1e59dcc5e"><div class="ttname"><a href="structTreeWalk.html#aa08a0586a68d1f4f87e0caa1e59dcc5e">TreeWalk::reduce</a></div><div class="ttdeci">TreeWalkReduceResultFunction reduce</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00088">treewalk.h:88</a></div></div>
<div class="ttc" id="walltime_8h_html_a2d23071e44d020b4a0b3f2876667d370"><div class="ttname"><a href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a></div><div class="ttdeci">#define walltime_measure(name)</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00005">walltime.h:5</a></div></div>
<div class="ttc" id="structTreeWalk_html_affd5eae4b5a63dcce236ac15b00b4c7c"><div class="ttname"><a href="structTreeWalk.html#affd5eae4b5a63dcce236ac15b00b4c7c">TreeWalk::query_type_elsize</a></div><div class="ttdeci">size_t query_type_elsize</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00079">treewalk.h:79</a></div></div>
<div class="ttc" id="structTreeWalk_html_adc62eb856144faf75a8759af94f4b92f"><div class="ttname"><a href="structTreeWalk.html#adc62eb856144faf75a8759af94f4b92f">TreeWalk::UseNodeList</a></div><div class="ttdeci">int UseNodeList</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00093">treewalk.h:93</a></div></div>
<div class="ttc" id="timestep_8c_html_a1076ffdac0ece6476524e3fd900d39fc"><div class="ttname"><a href="timestep_8c.html#a1076ffdac0ece6476524e3fd900d39fc">ActiveParticle</a></div><div class="ttdeci">int * ActiveParticle</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00040">timestep.c:40</a></div></div>
<div class="ttc" id="structTreeWalk_html_ac8c67faaf2c360ed510c4508f11f7c2d"><div class="ttname"><a href="structTreeWalk.html#ac8c67faaf2c360ed510c4508f11f7c2d">TreeWalk::result_type_elsize</a></div><div class="ttdeci">size_t result_type_elsize</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00080">treewalk.h:80</a></div></div>
<div class="ttc" id="structTreeWalk_html_a80f3ba2d463ce192ccb0f42eed264f56"><div class="ttname"><a href="structTreeWalk.html#a80f3ba2d463ce192ccb0f42eed264f56">TreeWalk::timecommsumm1</a></div><div class="ttdeci">double timecommsumm1</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00104">treewalk.h:104</a></div></div>
<div class="ttc" id="treewalk_8c_html_aa6772bdbc1552278ca7dae6a9adb031d"><div class="ttname"><a href="treewalk_8c.html#aa6772bdbc1552278ca7dae6a9adb031d">treewalk_run</a></div><div class="ttdeci">void treewalk_run(TreeWalk *tw, int *active_set, int size)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8c_source.html#l00543">treewalk.c:543</a></div></div>
<div class="ttc" id="structTreeWalk_html_a2f6bc842f407a44d99de52e9b5140454"><div class="ttname"><a href="structTreeWalk.html#a2f6bc842f407a44d99de52e9b5140454">TreeWalk::haswork</a></div><div class="ttdeci">TreeWalkHasWorkFunction haswork</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00086">treewalk.h:86</a></div></div>
<div class="ttc" id="structTreeWalk_html"><div class="ttname"><a href="structTreeWalk.html">TreeWalk</a></div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00071">treewalk.h:71</a></div></div>
<div class="ttc" id="gravshort_8h_html_a0d8eb43f2856198175c662d89d134ed0"><div class="ttname"><a href="gravshort_8h.html#a0d8eb43f2856198175c662d89d134ed0">grav_short_haswork</a></div><div class="ttdeci">static int grav_short_haswork(int i, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="gravshort_8h_source.html#l00028">gravshort.h:28</a></div></div>
<div class="ttc" id="structTreeWalk_html_a8c4dcda60d680c3d56423fca8647472f"><div class="ttname"><a href="structTreeWalk.html#a8c4dcda60d680c3d56423fca8647472f">TreeWalk::postprocess</a></div><div class="ttdeci">TreeWalkProcessFunction postprocess</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00090">treewalk.h:90</a></div></div>
<div class="ttc" id="gravshort_8h_html_aad791aedc4780df1ac22425fed09862b"><div class="ttname"><a href="gravshort_8h.html#aad791aedc4780df1ac22425fed09862b">grav_short_copy</a></div><div class="ttdeci">static void grav_short_copy(int place, TreeWalkQueryGravShort *input, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="gravshort_8h_source.html#l00050">gravshort.h:50</a></div></div>
<div class="ttc" id="structTreeWalkQueryGravShort_html"><div class="ttname"><a href="structTreeWalkQueryGravShort.html">TreeWalkQueryGravShort</a></div><div class="ttdef"><b>Definition:</b> <a href="gravshort_8h_source.html#l00011">gravshort.h:11</a></div></div>
<div class="ttc" id="gravshort_8h_html_ada1a1a082fdcaa4f27251021a8eb87c9"><div class="ttname"><a href="gravshort_8h.html#ada1a1a082fdcaa4f27251021a8eb87c9">grav_short_postprocess</a></div><div class="ttdeci">static void grav_short_postprocess(int i, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="gravshort_8h_source.html#l00034">gravshort.h:34</a></div></div>
<div class="ttc" id="structTreeWalk_html_ad0b91dafd46de132917e7993869514c5"><div class="ttname"><a href="structTreeWalk.html#ad0b91dafd46de132917e7993869514c5">TreeWalk::fill</a></div><div class="ttdeci">TreeWalkFillQueryFunction fill</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00087">treewalk.h:87</a></div></div>
<div class="ttc" id="treewalk_8h_html_a18ae30498477c2521e95251e204e8928"><div class="ttname"><a href="treewalk_8h.html#a18ae30498477c2521e95251e204e8928">TreeWalkProcessFunction</a></div><div class="ttdeci">int(* TreeWalkProcessFunction)(const int i, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00060">treewalk.h:60</a></div></div>
<div class="ttc" id="structTreeWalk_html_ab4e96e67f2e72ac33dca9dd06cdac6c0"><div class="ttname"><a href="structTreeWalk.html#ab4e96e67f2e72ac33dca9dd06cdac6c0">TreeWalk::visit</a></div><div class="ttdeci">TreeWalkVisitFunction visit</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00085">treewalk.h:85</a></div></div>
<div class="ttc" id="timestep_8c_html_a234d3f841781f50a25da4e8da82a0d32"><div class="ttname"><a href="timestep_8c.html#a234d3f841781f50a25da4e8da82a0d32">NumActiveParticle</a></div><div class="ttdeci">int NumActiveParticle</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00039">timestep.c:39</a></div></div>
<div class="ttc" id="walltime_8h_html_a5cedff8706bf3a249bd5e3c365b67964"><div class="ttname"><a href="walltime_8h.html#a5cedff8706bf3a249bd5e3c365b67964">WALLTIME_IGNORE</a></div><div class="ttdeci">#define WALLTIME_IGNORE</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00003">walltime.h:3</a></div></div>
<div class="ttc" id="structTreeWalk_html_a1bc94a4f19b597a6328f7048da73d8af"><div class="ttname"><a href="structTreeWalk.html#a1bc94a4f19b597a6328f7048da73d8af">TreeWalk::ev_label</a></div><div class="ttdeci">char * ev_label</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00075">treewalk.h:75</a></div></div>
<div class="ttc" id="treewalk_8h_html_a01b18ab132aa3a45e2f2bed8aef94633"><div class="ttname"><a href="treewalk_8h.html#a01b18ab132aa3a45e2f2bed8aef94633">TreeWalkVisitFunction</a></div><div class="ttdeci">int(* TreeWalkVisitFunction)(TreeWalkQueryBase *input, TreeWalkResultBase *output, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00055">treewalk.h:55</a></div></div>
<div class="ttc" id="structTreeWalk_html_a714d0465e0498a5a8d0b698d37348ce6"><div class="ttname"><a href="structTreeWalk.html#a714d0465e0498a5a8d0b698d37348ce6">TreeWalk::timecomp3</a></div><div class="ttdeci">double timecomp3</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00103">treewalk.h:103</a></div></div>
<div class="ttc" id="structTreeWalk_html_a6518c361d396be49a9d1c676d8769802"><div class="ttname"><a href="structTreeWalk.html#a6518c361d396be49a9d1c676d8769802">TreeWalk::timecomp2</a></div><div class="ttdeci">double timecomp2</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00102">treewalk.h:102</a></div></div>
<div class="ttc" id="structTreeWalk_html_ada69256fab1ba3b0e5ff0f837f749b2e"><div class="ttname"><a href="structTreeWalk.html#ada69256fab1ba3b0e5ff0f837f749b2e">TreeWalk::timecomp1</a></div><div class="ttdeci">double timecomp1</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00101">treewalk.h:101</a></div></div>
<div class="ttc" id="treewalk_8h_html_ac9a8ade7817c58b83859399364deb1a1"><div class="ttname"><a href="treewalk_8h.html#ac9a8ade7817c58b83859399364deb1a1">TreeWalkFillQueryFunction</a></div><div class="ttdeci">void(* TreeWalkFillQueryFunction)(const int j, TreeWalkQueryBase *query, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00062">treewalk.h:62</a></div></div>
<div class="ttc" id="endrun_8c_html_a6567cd867c5549fb6586e19ccd819764"><div class="ttname"><a href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a></div><div class="ttdeci">void message(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00226">endrun.c:226</a></div></div>
<div class="ttc" id="structTreeWalk_html_aacf67d9ea224563ae4006114d97e473c"><div class="ttname"><a href="structTreeWalk.html#aacf67d9ea224563ae4006114d97e473c">TreeWalk::timewait2</a></div><div class="ttdeci">double timewait2</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00100">treewalk.h:100</a></div></div>
<div class="ttc" id="structTreeWalk_html_ae62aa594cbe693d40de9334cc0f7c820"><div class="ttname"><a href="structTreeWalk.html#ae62aa594cbe693d40de9334cc0f7c820">TreeWalk::timewait1</a></div><div class="ttdeci">double timewait1</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00099">treewalk.h:99</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
<div class="ttc" id="gravshort_8h_html_abb010959059906357308b409ed53c326"><div class="ttname"><a href="gravshort_8h.html#abb010959059906357308b409ed53c326">grav_short_reduce</a></div><div class="ttdeci">static void grav_short_reduce(int place, TreeWalkResultGravShort *result, enum TreeWalkReduceMode mode, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="gravshort_8h_source.html#l00066">gravshort.h:66</a></div></div>
<div class="ttc" id="walltime_8h_html_a9266fc830d2aac1ad7d6e5322be6f489"><div class="ttname"><a href="walltime_8h.html#a9266fc830d2aac1ad7d6e5322be6f489">walltime_add</a></div><div class="ttdeci">#define walltime_add(name, dt)</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00006">walltime.h:6</a></div></div>
<div class="ttc" id="treewalk_8h_html_a2b5a07b25001ac6e9e628d4eb0493b8c"><div class="ttname"><a href="treewalk_8h.html#a2b5a07b25001ac6e9e628d4eb0493b8c">TreeWalkReduceResultFunction</a></div><div class="ttdeci">void(* TreeWalkReduceResultFunction)(const int j, TreeWalkResultBase *result, const enum TreeWalkReduceMode mode, TreeWalk *tw)</div><div class="ttdef"><b>Definition:</b> <a href="treewalk_8h_source.html#l00063">treewalk.h:63</a></div></div>
<div class="ttc" id="gravshort-tree_8c_html_a3ffcbdc6a83731eeae868eb50429d837"><div class="ttname"><a href="gravshort-tree_8c.html#a3ffcbdc6a83731eeae868eb50429d837">force_treeev_shortrange</a></div><div class="ttdeci">int force_treeev_shortrange(TreeWalkQueryGravShort *input, TreeWalkResultGravShort *output, LocalTreeWalk *lv)</div><div class="ttdef"><b>Definition:</b> <a href="gravshort-tree_8c_source.html#l00110">gravshort-tree.c:110</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a3890f7b7605d1abaf3cd23eeca5bcdd5_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a3890f7b7605d1abaf3cd23eeca5bcdd5_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a6a55456b331c8b01d7ae1352809b82f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a55456b331c8b01d7ae1352809b82f2">&#9670;&nbsp;</a></span>gravpm_force()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gravpm_force </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="gravpm_8c_source.html#l00071">71</a> of file <a class="el" href="gravpm_8c_source.html">gravpm.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="allvars_8h_source.html#l00160">global_data_all_processes::BoxSize</a>, <a class="el" href="forcetree_8c_source.html#l00101">force_tree_rebuild()</a>, <a class="el" href="cosmology_8c_source.html#l00078">GrowthFactor()</a>, <a class="el" href="gravpm_8c_source.html#l00503">hybrid_nu_gravpm_is_active()</a>, <a class="el" href="allvars_8h_source.html#l00247">global_data_all_processes::HybridNeutrinosOn</a>, <a class="el" href="allvars_8h_source.html#l00245">global_data_all_processes::MassiveNuLinRespOn</a>, <a class="el" href="gravpm_8c_source.html#l00022">nu_pow</a>, <a class="el" href="partmanager_8h_source.html#l00093">part_manager_type::NumPart</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::OutputDir</a>, <a class="el" href="partmanager_8h_source.html#l00099">P</a>, <a class="el" href="partmanager_8c_source.html#l00009">PartManager</a>, <a class="el" href="petapm_8c_source.html#l00348">petapm_force()</a>, <a class="el" href="gravpm_8c_source.html#l00018">PowerSpectrum</a>, <a class="el" href="gravpm_8c_source.html#l00359">powerspectrum_nu_save()</a>, <a class="el" href="powerspectrum_8c_source.html#l00069">powerspectrum_save()</a>, <a class="el" href="powerspectrum_8c_source.html#l00038">powerspectrum_sum()</a>, <a class="el" href="powerspectrum_8c_source.html#l00028">powerspectrum_zero()</a>, <a class="el" href="allvars_8c_source.html#l00024">ThisTask</a>, <a class="el" href="allvars_8h_source.html#l00267">global_data_all_processes::Time</a>, <a class="el" href="allvars_8h_source.html#l00164">global_data_all_processes::UnitLength_in_cm</a>, and <a class="el" href="walltime_8h_source.html#l00005">walltime_measure</a>.</p>

<p class="reference">Referenced by <a class="el" href="run_8c_source.html#l00190">compute_accelerations()</a>, and <a class="el" href="runtests_8c_source.html#l00027">runtests()</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                        {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="structPetaPMParticleStruct.html">PetaPMParticleStruct</a> pstruct = {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>,</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keyword">sizeof</span>(<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[0]),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        (<span class="keywordtype">char</span>*) &amp;<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[0].Pos[0]  - (<span class="keywordtype">char</span>*) <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        (<span class="keywordtype">char</span>*) &amp;<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[0].Mass  - (<span class="keywordtype">char</span>*) <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>,</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        (<span class="keywordtype">char</span>*) &amp;<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[0].RegionInd - (<span class="keywordtype">char</span>*) <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>,</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        (<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aa5b73f85f7a8e48cf1a5be1478103fac">HybridNeutrinosOn</a> ? &amp;<a class="code" href="gravpm_8c.html#a7ccde9e571ed655b920870ceef39d937">hybrid_nu_gravpm_is_active</a> : NULL),</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <a class="code" href="partmanager_8c.html#a6cef44682776e476d8f9f1b9e1f9fe16">PartManager</a>-&gt;<a class="code" href="structpart__manager__type.html#ae19becfa10cbd680504de1eb3577cb75">NumPart</a>,</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    };</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="powerspectrum_8c.html#af95510704f0aaa481a162321cdaee8e8">powerspectrum_zero</a>(&amp;<a class="code" href="gravpm_8c.html#afd15e35291a9cbe509f8ba6cd6ff27ee">PowerSpectrum</a>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">    #pragma omp parallel for</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="partmanager_8c.html#a6cef44682776e476d8f9f1b9e1f9fe16">PartManager</a>-&gt;<a class="code" href="structpart__manager__type.html#ae19becfa10cbd680504de1eb3577cb75">NumPart</a>; i++)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].GravPM[0] = <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].GravPM[1] = <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].GravPM[2] = 0;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">     * we apply potential transfer immediately after the R2C transform,</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">     * Therefore the force transfer functions are based on the potential,</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">     * not the density.</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">     * */</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="petapm_8c.html#a0dd847d1caccabe743e6c3fb81220225">petapm_force</a>(<a class="code" href="gravpm_8c.html#a2b4e24652d5dabae5adc014170031ac8">_prepare</a>, &amp;<a class="code" href="gravpm_8c.html#ae63eda7226191eedaadfa68baeaf82bf">global_functions</a>, <a class="code" href="gravpm_8c.html#aee8aad1000ac2e290fc97f278fa82d24">functions</a>, &amp;pstruct, NULL);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="powerspectrum_8c.html#a1908289e94a68d593eb3ab7cce3f150b">powerspectrum_sum</a>(&amp;<a class="code" href="gravpm_8c.html#afd15e35291a9cbe509f8ba6cd6ff27ee">PowerSpectrum</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ac1b2e52cf547f5b2fe4bdfb0eaafa22f">BoxSize</a>*<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a111a45896aafd67faa8f0c9ef897612f">UnitLength_in_cm</a>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">/*Now save the power spectrum*/</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> == 0)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="powerspectrum_8c.html#a82283555447a39c1e2157f1917620489">powerspectrum_save</a>(&amp;<a class="code" href="gravpm_8c.html#afd15e35291a9cbe509f8ba6cd6ff27ee">PowerSpectrum</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">Time</a>, <a class="code" href="cosmology_8c.html#a43947590473b9f1216fcf16bd7e5c1ed">GrowthFactor</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">Time</a>, 1.0));</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> == 0 &amp;&amp; <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a9c91100ac0c1febff2e4959d10a525d8">MassiveNuLinRespOn</a>)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="gravpm_8c.html#a2ac506413fbf4dfe1ea6526c66d909bf">powerspectrum_nu_save</a>(&amp;<a class="code" href="gravpm_8c.html#a8e736ada711e79517c04d42d2d5aebd8">nu_pow</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">Time</a>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<span class="stringliteral">&quot;/LongRange&quot;</span>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">/*Rebuild the force tree we freed in _prepare to save memory*/</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="forcetree_8c.html#a45a1a710bd7d997dbe7cf22a7600b731">force_tree_rebuild</a>();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="partmanager_8h_html_a2748566f4c443ee77aa831e63dbb5ebe"><div class="ttname"><a href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a></div><div class="ttdeci">#define P</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8h_source.html#l00099">partmanager.h:99</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a9c91100ac0c1febff2e4959d10a525d8"><div class="ttname"><a href="structglobal__data__all__processes.html#a9c91100ac0c1febff2e4959d10a525d8">global_data_all_processes::MassiveNuLinRespOn</a></div><div class="ttdeci">int MassiveNuLinRespOn</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00245">allvars.h:245</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aa5b73f85f7a8e48cf1a5be1478103fac"><div class="ttname"><a href="structglobal__data__all__processes.html#aa5b73f85f7a8e48cf1a5be1478103fac">global_data_all_processes::HybridNeutrinosOn</a></div><div class="ttdeci">int HybridNeutrinosOn</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00247">allvars.h:247</a></div></div>
<div class="ttc" id="gravpm_8c_html_a8e736ada711e79517c04d42d2d5aebd8"><div class="ttname"><a href="gravpm_8c.html#a8e736ada711e79517c04d42d2d5aebd8">nu_pow</a></div><div class="ttdeci">_delta_pow nu_pow</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00022">gravpm.c:22</a></div></div>
<div class="ttc" id="walltime_8h_html_a2d23071e44d020b4a0b3f2876667d370"><div class="ttname"><a href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a></div><div class="ttdeci">#define walltime_measure(name)</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00005">walltime.h:5</a></div></div>
<div class="ttc" id="gravpm_8c_html_a2b4e24652d5dabae5adc014170031ac8"><div class="ttname"><a href="gravpm_8c.html#a2b4e24652d5dabae5adc014170031ac8">_prepare</a></div><div class="ttdeci">static PetaPMRegion * _prepare(void *userdata, int *Nregions)</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00108">gravpm.c:108</a></div></div>
<div class="ttc" id="gravpm_8c_html_aee8aad1000ac2e290fc97f278fa82d24"><div class="ttname"><a href="gravpm_8c.html#aee8aad1000ac2e290fc97f278fa82d24">functions</a></div><div class="ttdeci">static PetaPMFunctions functions[]</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00042">gravpm.c:42</a></div></div>
<div class="ttc" id="cosmology_8c_html_a43947590473b9f1216fcf16bd7e5c1ed"><div class="ttname"><a href="cosmology_8c.html#a43947590473b9f1216fcf16bd7e5c1ed">GrowthFactor</a></div><div class="ttdeci">double GrowthFactor(double astart, double aend)</div><div class="ttdef"><b>Definition:</b> <a href="cosmology_8c_source.html#l00078">cosmology.c:78</a></div></div>
<div class="ttc" id="forcetree_8c_html_a45a1a710bd7d997dbe7cf22a7600b731"><div class="ttname"><a href="forcetree_8c.html#a45a1a710bd7d997dbe7cf22a7600b731">force_tree_rebuild</a></div><div class="ttdeci">void force_tree_rebuild()</div><div class="ttdef"><b>Definition:</b> <a href="forcetree_8c_source.html#l00101">forcetree.c:101</a></div></div>
<div class="ttc" id="powerspectrum_8c_html_a1908289e94a68d593eb3ab7cce3f150b"><div class="ttname"><a href="powerspectrum_8c.html#a1908289e94a68d593eb3ab7cce3f150b">powerspectrum_sum</a></div><div class="ttdeci">void powerspectrum_sum(struct _powerspectrum *PowerSpectrum, const double BoxSize_in_cm)</div><div class="ttdef"><b>Definition:</b> <a href="powerspectrum_8c_source.html#l00038">powerspectrum.c:38</a></div></div>
<div class="ttc" id="allvars_8c_html_a52c8c7d2abff436111942e02c5bb466a"><div class="ttname"><a href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a></div><div class="ttdeci">int ThisTask</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00024">allvars.c:24</a></div></div>
<div class="ttc" id="powerspectrum_8c_html_af95510704f0aaa481a162321cdaee8e8"><div class="ttname"><a href="powerspectrum_8c.html#af95510704f0aaa481a162321cdaee8e8">powerspectrum_zero</a></div><div class="ttdeci">void powerspectrum_zero(struct _powerspectrum *PowerSpectrum)</div><div class="ttdef"><b>Definition:</b> <a href="powerspectrum_8c_source.html#l00028">powerspectrum.c:28</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a25b9da73fdcbdc45fbe4a6ad45479f09"><div class="ttname"><a href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">global_data_all_processes::Time</a></div><div class="ttdeci">double Time</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00267">allvars.h:267</a></div></div>
<div class="ttc" id="structPetaPMParticleStruct_html"><div class="ttname"><a href="structPetaPMParticleStruct.html">PetaPMParticleStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="petapm_8h_source.html#l00034">petapm.h:34</a></div></div>
<div class="ttc" id="structpart__manager__type_html_ae19becfa10cbd680504de1eb3577cb75"><div class="ttname"><a href="structpart__manager__type.html#ae19becfa10cbd680504de1eb3577cb75">part_manager_type::NumPart</a></div><div class="ttdeci">int NumPart</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8h_source.html#l00093">partmanager.h:93</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aebda5d1b80cfb767b9668d7858c36bcc"><div class="ttname"><a href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">global_data_all_processes::OutputDir</a></div><div class="ttdeci">char OutputDir[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_ac1b2e52cf547f5b2fe4bdfb0eaafa22f"><div class="ttname"><a href="structglobal__data__all__processes.html#ac1b2e52cf547f5b2fe4bdfb0eaafa22f">global_data_all_processes::BoxSize</a></div><div class="ttdeci">double BoxSize</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00160">allvars.h:160</a></div></div>
<div class="ttc" id="gravpm_8c_html_afd15e35291a9cbe509f8ba6cd6ff27ee"><div class="ttname"><a href="gravpm_8c.html#afd15e35291a9cbe509f8ba6cd6ff27ee">PowerSpectrum</a></div><div class="ttdeci">struct _powerspectrum PowerSpectrum</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00018">gravpm.c:18</a></div></div>
<div class="ttc" id="gravpm_8c_html_a7ccde9e571ed655b920870ceef39d937"><div class="ttname"><a href="gravpm_8c.html#a7ccde9e571ed655b920870ceef39d937">hybrid_nu_gravpm_is_active</a></div><div class="ttdeci">static int hybrid_nu_gravpm_is_active(int i)</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00503">gravpm.c:503</a></div></div>
<div class="ttc" id="partmanager_8c_html_a6cef44682776e476d8f9f1b9e1f9fe16"><div class="ttname"><a href="partmanager_8c.html#a6cef44682776e476d8f9f1b9e1f9fe16">PartManager</a></div><div class="ttdeci">struct part_manager_type PartManager[1]</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8c_source.html#l00009">partmanager.c:9</a></div></div>
<div class="ttc" id="gravpm_8c_html_a2ac506413fbf4dfe1ea6526c66d909bf"><div class="ttname"><a href="gravpm_8c.html#a2ac506413fbf4dfe1ea6526c66d909bf">powerspectrum_nu_save</a></div><div class="ttdeci">void powerspectrum_nu_save(struct _delta_pow *nu_pow, const char *OutputDir, const double Time)</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00359">gravpm.c:359</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
<div class="ttc" id="powerspectrum_8c_html_a82283555447a39c1e2157f1917620489"><div class="ttname"><a href="powerspectrum_8c.html#a82283555447a39c1e2157f1917620489">powerspectrum_save</a></div><div class="ttdeci">void powerspectrum_save(struct _powerspectrum *PowerSpectrum, const char *OutputDir, const double Time, const double D1)</div><div class="ttdef"><b>Definition:</b> <a href="powerspectrum_8c_source.html#l00069">powerspectrum.c:69</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a111a45896aafd67faa8f0c9ef897612f"><div class="ttname"><a href="structglobal__data__all__processes.html#a111a45896aafd67faa8f0c9ef897612f">global_data_all_processes::UnitLength_in_cm</a></div><div class="ttdeci">double UnitLength_in_cm</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00164">allvars.h:164</a></div></div>
<div class="ttc" id="gravpm_8c_html_ae63eda7226191eedaadfa68baeaf82bf"><div class="ttname"><a href="gravpm_8c.html#ae63eda7226191eedaadfa68baeaf82bf">global_functions</a></div><div class="ttdeci">static PetaPMGlobalFunctions global_functions</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00051">gravpm.c:51</a></div></div>
<div class="ttc" id="petapm_8c_html_a0dd847d1caccabe743e6c3fb81220225"><div class="ttname"><a href="petapm_8c.html#a0dd847d1caccabe743e6c3fb81220225">petapm_force</a></div><div class="ttdeci">void petapm_force(petapm_prepare_func prepare, PetaPMGlobalFunctions *global_functions, PetaPMFunctions *functions, PetaPMParticleStruct *pstruct, void *userdata)</div><div class="ttdef"><b>Definition:</b> <a href="petapm_8c_source.html#l00348">petapm.c:348</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a6a55456b331c8b01d7ae1352809b82f2_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a6a55456b331c8b01d7ae1352809b82f2_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab080cb20bac2a1a6153a84e8cfd15374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab080cb20bac2a1a6153a84e8cfd15374">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>RestartSnapNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function reads the initial conditions, and allocates storage for the tree(s). Various variables of the particle data are initialised and An intial domain decomposition is performed. If SPH particles are present, the initial SPH smoothing lengths are determined. </p>

<p class="definition">Definition at line <a class="el" href="init_8c_source.html#l00040">40</a> of file <a class="el" href="init_8c_source.html">init.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="slotsmanager_8h_source.html#l00124">BHP</a>, <a class="el" href="allvars_8h_source.html#l00160">global_data_all_processes::BoxSize</a>, <a class="el" href="init_8c_source.html#l00137">check_omega()</a>, <a class="el" href="init_8c_source.html#l00163">check_positions()</a>, <a class="el" href="domain_8c_source.html#l00133">domain_decompose_full()</a>, <a class="el" href="exchange_8c_source.html#l00388">domain_test_id_uniqueness()</a>, <a class="el" href="fof_8c_source.html#l00039">fof_init()</a>, <a class="el" href="timefac_8c_source.html#l00070">init_drift_table()</a>, <a class="el" href="timestep_8c_source.html#l00078">init_timebins()</a>, <a class="el" href="allvars_8h_source.html#l00262">global_data_all_processes::InitSnapshotCount</a>, <a class="el" href="timebinmgr_8c_source.html#l00140">loga_from_ti()</a>, <a class="el" href="endrun_8c_source.html#l00226">message()</a>, <a class="el" href="partmanager_8h_source.html#l00093">part_manager_type::NumPart</a>, <a class="el" href="partmanager_8h_source.html#l00099">P</a>, <a class="el" href="partmanager_8c_source.html#l00009">PartManager</a>, <a class="el" href="peano_8h_source.html#l00016">PEANO()</a>, <a class="el" href="petaio_8c_source.html#l00432">petaio_read_snapshot()</a>, <a class="el" href="timestep_8c_source.html#l00683">rebuild_activelist()</a>, <a class="el" href="timebinmgr_8c_source.html#l00203">round_down_power_of_two()</a>, <a class="el" href="allvars_8h_source.html#l00397">global_data_all_processes::SeedBlackHoleMass</a>, <a class="el" href="timestep_8c_source.html#l00113">set_global_time()</a>, <a class="el" href="init_8c_source.html#l00181">setup_smoothinglengths()</a>, <a class="el" href="timebinmgr_8c_source.html#l00023">setup_sync_points()</a>, <a class="el" href="allvars_8h_source.html#l00261">global_data_all_processes::SnapshotFileCount</a>, <a class="el" href="slotsmanager_8h_source.html#l00123">SPHP</a>, <a class="el" href="allvars_8h_source.html#l00282">global_data_all_processes::Ti_Current</a>, <a class="el" href="timebinmgr_8c_source.html#l00153">ti_from_loga()</a>, <a class="el" href="timebinmgr_8h_source.html#l00014">TIMEBASE</a>, <a class="el" href="allvars_8h_source.html#l00159">global_data_all_processes::TimeIC</a>, <a class="el" href="allvars_8h_source.html#l00158">global_data_all_processes::TimeInit</a>, <a class="el" href="allvars_8h_source.html#l00267">global_data_all_processes::TimeMax</a>, and <a class="el" href="allvars_8h_source.html#l00187">global_data_all_processes::TreeAllocFactor</a>.</p>

<p class="reference">Referenced by <a class="el" href="begrun_8c_source.html#l00050">begrun()</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">int</span> i, j;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">/*Add TimeInit and TimeMax to the output list*/</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (RestartSnapNum &lt; 0) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="comment">/* allow a first snapshot at IC time; */</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <a class="code" href="timebinmgr_8c.html#a9c26c20350941658c444fd2892360e4d">setup_sync_points</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a16e692589bf4a83f2d87e74e07dddd54">TimeIC</a>, 0.0);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="comment">/* skip dumping the exactly same snapshot */</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <a class="code" href="timebinmgr_8c.html#a9c26c20350941658c444fd2892360e4d">setup_sync_points</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a16e692589bf4a83f2d87e74e07dddd54">TimeIC</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a841b3b63ba737d259740920bc13501e6">TimeInit</a>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="comment">/* If TimeInit is not in a sensible place on the integer timeline</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">         * (can happen if the outputs changed since it was written)</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">         * start the integer timeline anew from TimeInit */</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="types_8h.html#ab7f8779710efa655135cf9cbee3137a7">inttime_t</a> ti_init = <a class="code" href="timebinmgr_8c.html#a2e2b7b549c7ebcd90457efb5330c1955">ti_from_loga</a>(log(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a841b3b63ba737d259740920bc13501e6">TimeInit</a>)) % <a class="code" href="timebinmgr_8h.html#ad44dabdb7a0bef8536e2d34a01177d48">TIMEBASE</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="timebinmgr_8c.html#a670638d37437095012fe1effdc9c1098">round_down_power_of_two</a>(ti_init) != ti_init) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0,<span class="stringliteral">&quot;Resetting integer timeline (as %x != %x) to current snapshot\n&quot;</span>,ti_init, <a class="code" href="timebinmgr_8c.html#a670638d37437095012fe1effdc9c1098">round_down_power_of_two</a>(ti_init));</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <a class="code" href="timebinmgr_8c.html#a9c26c20350941658c444fd2892360e4d">setup_sync_points</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a841b3b63ba737d259740920bc13501e6">TimeInit</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a841b3b63ba737d259740920bc13501e6">TimeInit</a>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="timestep_8c.html#a56c5eecfbeb9072b689306aac4dcd6db">init_timebins</a>(log(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a841b3b63ba737d259740920bc13501e6">TimeInit</a>));</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">/* Important to set the global time before reading in the snapshot time as it affects the GT funcs for IO. */</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="timestep_8c.html#aaebcb31d8cb374d360e1e165df6fe26d">set_global_time</a>(exp(<a class="code" href="timebinmgr_8c.html#a90eb3a2bdca47035148249e68fc244be">loga_from_ti</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>)));</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="timefac_8c.html#a1468eaf9ef1cf0a635ba6af56313074b">init_drift_table</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a841b3b63ba737d259740920bc13501e6">TimeInit</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a3e22fbc2ce177c1e383e9acbbf44f8d5">TimeMax</a>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">/*Read the snapshot*/</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="petaio_8c.html#a3dd52bd7a320fa9ef1c7963d060ae4ec">petaio_read_snapshot</a>(RestartSnapNum);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="exchange_8c.html#ada6148dd7651b0ee281057372cd45c4c">domain_test_id_uniqueness</a>();</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="init_8c.html#a1b96c5b41f1209ee91cd369f01a52352">check_omega</a>();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="init_8c.html#a2ee1732f9619d4556d6fb16224ecc563">check_positions</a>();</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="fof_8c.html#aafc9a21f8ced4c1ebb7f9aaf8181bb9d">fof_init</a>();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac0d3fcbac688a31e6bda55ef819c44b">SnapshotFileCount</a> = RestartSnapNum + 1;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a2b2cba67893ba69807ea07de28cb9ad4">InitSnapshotCount</a> = RestartSnapNum + 1;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a374a92c40b930e388b7180b8862c3670">TreeAllocFactor</a> = 0.7;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">    #pragma omp parallel for</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="partmanager_8c.html#a6cef44682776e476d8f9f1b9e1f9fe16">PartManager</a>-&gt;<a class="code" href="structpart__manager__type.html#ae19becfa10cbd680504de1eb3577cb75">NumPart</a>; i++)   <span class="comment">/* initialize sph_properties */</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].GravCost = 1;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Ti_drift = <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Ti_kick = <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#ifdef BLACK_HOLES</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">if</span>(RestartSnapNum == -1 &amp;&amp; <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Type == 5 )</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <a class="code" href="slotsmanager_8h.html#a57267616e3ede141780cbe94358d827f">BHP</a>(i).Mass = <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#afcc63246ec154a626ac3771147d4ff6a">SeedBlackHoleMass</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Key = <a class="code" href="peano_8h.html#a48e081711b7df745b6222e6e62e081ed">PEANO</a>(<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Pos, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ac1b2e52cf547f5b2fe4bdfb0eaafa22f">BoxSize</a>);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[i].Type != 0) <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">for</span>(j = 0; j &lt; 3; j++)</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).HydroAccel[j] = 0;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).DtEntropy = 0;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span>(RestartSnapNum == -1)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).Density = -1;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor">#ifdef DENSITY_INDEPENDENT_SPH</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).EgyWtDensity = -1;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).EntVarPred = -1;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).Ne = 1.0;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).DivVel = 0;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="preprocessor">#ifdef SFR</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).DelayTime = 0;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#ifdef BLACK_HOLES</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <a class="code" href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a>(i).Injected_BH_Energy = 0;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="domain_8c.html#a168c36ec12faca23e23395b6a13d2037">domain_decompose_full</a>();    <span class="comment">/* do initial domain decomposition (gives equal numbers of particles) */</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="timestep_8c.html#ad04ae4be74d1729309b2a51cdc72e006">rebuild_activelist</a>(0);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="init_8c.html#a643ef34b585446f8ccbbf3239df2db71">setup_smoothinglengths</a>(RestartSnapNum);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="ttc" id="petaio_8c_html_a3dd52bd7a320fa9ef1c7963d060ae4ec"><div class="ttname"><a href="petaio_8c.html#a3dd52bd7a320fa9ef1c7963d060ae4ec">petaio_read_snapshot</a></div><div class="ttdeci">void petaio_read_snapshot(int num)</div><div class="ttdef"><b>Definition:</b> <a href="petaio_8c_source.html#l00432">petaio.c:432</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aac685530de56448068f8dd037fc56490"><div class="ttname"><a href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">global_data_all_processes::Ti_Current</a></div><div class="ttdeci">inttime_t Ti_Current</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00282">allvars.h:282</a></div></div>
<div class="ttc" id="timebinmgr_8c_html_a2e2b7b549c7ebcd90457efb5330c1955"><div class="ttname"><a href="timebinmgr_8c.html#a2e2b7b549c7ebcd90457efb5330c1955">ti_from_loga</a></div><div class="ttdeci">inttime_t ti_from_loga(double loga)</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8c_source.html#l00153">timebinmgr.c:153</a></div></div>
<div class="ttc" id="partmanager_8h_html_a2748566f4c443ee77aa831e63dbb5ebe"><div class="ttname"><a href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a></div><div class="ttdeci">#define P</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8h_source.html#l00099">partmanager.h:99</a></div></div>
<div class="ttc" id="slotsmanager_8h_html_a57267616e3ede141780cbe94358d827f"><div class="ttname"><a href="slotsmanager_8h.html#a57267616e3ede141780cbe94358d827f">BHP</a></div><div class="ttdeci">#define BHP(i)</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00124">slotsmanager.h:124</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a16e692589bf4a83f2d87e74e07dddd54"><div class="ttname"><a href="structglobal__data__all__processes.html#a16e692589bf4a83f2d87e74e07dddd54">global_data_all_processes::TimeIC</a></div><div class="ttdeci">double TimeIC</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00159">allvars.h:159</a></div></div>
<div class="ttc" id="types_8h_html_ab7f8779710efa655135cf9cbee3137a7"><div class="ttname"><a href="types_8h.html#ab7f8779710efa655135cf9cbee3137a7">inttime_t</a></div><div class="ttdeci">int32_t inttime_t</div><div class="ttdef"><b>Definition:</b> <a href="types_8h_source.html#l00015">types.h:15</a></div></div>
<div class="ttc" id="init_8c_html_a2ee1732f9619d4556d6fb16224ecc563"><div class="ttname"><a href="init_8c.html#a2ee1732f9619d4556d6fb16224ecc563">check_positions</a></div><div class="ttdeci">static void check_positions(void)</div><div class="ttdef"><b>Definition:</b> <a href="init_8c_source.html#l00163">init.c:163</a></div></div>
<div class="ttc" id="domain_8c_html_a168c36ec12faca23e23395b6a13d2037"><div class="ttname"><a href="domain_8c.html#a168c36ec12faca23e23395b6a13d2037">domain_decompose_full</a></div><div class="ttdeci">void domain_decompose_full(void)</div><div class="ttdef"><b>Definition:</b> <a href="domain_8c_source.html#l00133">domain.c:133</a></div></div>
<div class="ttc" id="fof_8c_html_aafc9a21f8ced4c1ebb7f9aaf8181bb9d"><div class="ttname"><a href="fof_8c.html#aafc9a21f8ced4c1ebb7f9aaf8181bb9d">fof_init</a></div><div class="ttdeci">void fof_init()</div><div class="ttdef"><b>Definition:</b> <a href="fof_8c_source.html#l00039">fof.c:39</a></div></div>
<div class="ttc" id="timestep_8c_html_ad04ae4be74d1729309b2a51cdc72e006"><div class="ttname"><a href="timestep_8c.html#ad04ae4be74d1729309b2a51cdc72e006">rebuild_activelist</a></div><div class="ttdeci">int rebuild_activelist(inttime_t Ti_Current)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00683">timestep.c:683</a></div></div>
<div class="ttc" id="exchange_8c_html_ada6148dd7651b0ee281057372cd45c4c"><div class="ttname"><a href="exchange_8c.html#ada6148dd7651b0ee281057372cd45c4c">domain_test_id_uniqueness</a></div><div class="ttdeci">void domain_test_id_uniqueness(void)</div><div class="ttdef"><b>Definition:</b> <a href="exchange_8c_source.html#l00388">exchange.c:388</a></div></div>
<div class="ttc" id="timestep_8c_html_a56c5eecfbeb9072b689306aac4dcd6db"><div class="ttname"><a href="timestep_8c.html#a56c5eecfbeb9072b689306aac4dcd6db">init_timebins</a></div><div class="ttdeci">void init_timebins(double TimeInit)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00078">timestep.c:78</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a2b2cba67893ba69807ea07de28cb9ad4"><div class="ttname"><a href="structglobal__data__all__processes.html#a2b2cba67893ba69807ea07de28cb9ad4">global_data_all_processes::InitSnapshotCount</a></div><div class="ttdeci">int InitSnapshotCount</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00262">allvars.h:262</a></div></div>
<div class="ttc" id="slotsmanager_8h_html_a681d502f5cbf25161ff026312cd1498c"><div class="ttname"><a href="slotsmanager_8h.html#a681d502f5cbf25161ff026312cd1498c">SPHP</a></div><div class="ttdeci">#define SPHP(i)</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8h_source.html#l00123">slotsmanager.h:123</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a3e22fbc2ce177c1e383e9acbbf44f8d5"><div class="ttname"><a href="structglobal__data__all__processes.html#a3e22fbc2ce177c1e383e9acbbf44f8d5">global_data_all_processes::TimeMax</a></div><div class="ttdeci">double TimeMax</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00267">allvars.h:267</a></div></div>
<div class="ttc" id="structpart__manager__type_html_ae19becfa10cbd680504de1eb3577cb75"><div class="ttname"><a href="structpart__manager__type.html#ae19becfa10cbd680504de1eb3577cb75">part_manager_type::NumPart</a></div><div class="ttdeci">int NumPart</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8h_source.html#l00093">partmanager.h:93</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_afcc63246ec154a626ac3771147d4ff6a"><div class="ttname"><a href="structglobal__data__all__processes.html#afcc63246ec154a626ac3771147d4ff6a">global_data_all_processes::SeedBlackHoleMass</a></div><div class="ttdeci">double SeedBlackHoleMass</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00397">allvars.h:397</a></div></div>
<div class="ttc" id="timebinmgr_8c_html_a90eb3a2bdca47035148249e68fc244be"><div class="ttname"><a href="timebinmgr_8c.html#a90eb3a2bdca47035148249e68fc244be">loga_from_ti</a></div><div class="ttdeci">double loga_from_ti(inttime_t ti)</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8c_source.html#l00140">timebinmgr.c:140</a></div></div>
<div class="ttc" id="timebinmgr_8h_html_ad44dabdb7a0bef8536e2d34a01177d48"><div class="ttname"><a href="timebinmgr_8h.html#ad44dabdb7a0bef8536e2d34a01177d48">TIMEBASE</a></div><div class="ttdeci">#define TIMEBASE</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8h_source.html#l00014">timebinmgr.h:14</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a841b3b63ba737d259740920bc13501e6"><div class="ttname"><a href="structglobal__data__all__processes.html#a841b3b63ba737d259740920bc13501e6">global_data_all_processes::TimeInit</a></div><div class="ttdeci">double TimeInit</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00158">allvars.h:158</a></div></div>
<div class="ttc" id="init_8c_html_a1b96c5b41f1209ee91cd369f01a52352"><div class="ttname"><a href="init_8c.html#a1b96c5b41f1209ee91cd369f01a52352">check_omega</a></div><div class="ttdeci">static void check_omega(void)</div><div class="ttdef"><b>Definition:</b> <a href="init_8c_source.html#l00137">init.c:137</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_ac1b2e52cf547f5b2fe4bdfb0eaafa22f"><div class="ttname"><a href="structglobal__data__all__processes.html#ac1b2e52cf547f5b2fe4bdfb0eaafa22f">global_data_all_processes::BoxSize</a></div><div class="ttdeci">double BoxSize</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00160">allvars.h:160</a></div></div>
<div class="ttc" id="init_8c_html_a643ef34b585446f8ccbbf3239df2db71"><div class="ttname"><a href="init_8c.html#a643ef34b585446f8ccbbf3239df2db71">setup_smoothinglengths</a></div><div class="ttdeci">static void setup_smoothinglengths(int RestartSnapNum)</div><div class="ttdef"><b>Definition:</b> <a href="init_8c_source.html#l00181">init.c:181</a></div></div>
<div class="ttc" id="timefac_8c_html_a1468eaf9ef1cf0a635ba6af56313074b"><div class="ttname"><a href="timefac_8c.html#a1468eaf9ef1cf0a635ba6af56313074b">init_drift_table</a></div><div class="ttdeci">void init_drift_table(double timeBegin, double timeMax)</div><div class="ttdef"><b>Definition:</b> <a href="timefac_8c_source.html#l00070">timefac.c:70</a></div></div>
<div class="ttc" id="endrun_8c_html_a6567cd867c5549fb6586e19ccd819764"><div class="ttname"><a href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a></div><div class="ttdeci">void message(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00226">endrun.c:226</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a374a92c40b930e388b7180b8862c3670"><div class="ttname"><a href="structglobal__data__all__processes.html#a374a92c40b930e388b7180b8862c3670">global_data_all_processes::TreeAllocFactor</a></div><div class="ttdeci">double TreeAllocFactor</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00187">allvars.h:187</a></div></div>
<div class="ttc" id="timestep_8c_html_aaebcb31d8cb374d360e1e165df6fe26d"><div class="ttname"><a href="timestep_8c.html#aaebcb31d8cb374d360e1e165df6fe26d">set_global_time</a></div><div class="ttdeci">void set_global_time(double newtime)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00113">timestep.c:113</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aac0d3fcbac688a31e6bda55ef819c44b"><div class="ttname"><a href="structglobal__data__all__processes.html#aac0d3fcbac688a31e6bda55ef819c44b">global_data_all_processes::SnapshotFileCount</a></div><div class="ttdeci">int SnapshotFileCount</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00261">allvars.h:261</a></div></div>
<div class="ttc" id="timebinmgr_8c_html_a9c26c20350941658c444fd2892360e4d"><div class="ttname"><a href="timebinmgr_8c.html#a9c26c20350941658c444fd2892360e4d">setup_sync_points</a></div><div class="ttdeci">void setup_sync_points(double TimeIC, double no_snapshot_until_time)</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8c_source.html#l00023">timebinmgr.c:23</a></div></div>
<div class="ttc" id="partmanager_8c_html_a6cef44682776e476d8f9f1b9e1f9fe16"><div class="ttname"><a href="partmanager_8c.html#a6cef44682776e476d8f9f1b9e1f9fe16">PartManager</a></div><div class="ttdeci">struct part_manager_type PartManager[1]</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8c_source.html#l00009">partmanager.c:9</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
<div class="ttc" id="timebinmgr_8c_html_a670638d37437095012fe1effdc9c1098"><div class="ttname"><a href="timebinmgr_8c.html#a670638d37437095012fe1effdc9c1098">round_down_power_of_two</a></div><div class="ttdeci">inttime_t round_down_power_of_two(inttime_t dti)</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8c_source.html#l00203">timebinmgr.c:203</a></div></div>
<div class="ttc" id="peano_8h_html_a48e081711b7df745b6222e6e62e081ed"><div class="ttname"><a href="peano_8h.html#a48e081711b7df745b6222e6e62e081ed">PEANO</a></div><div class="ttdeci">static peano_t PEANO(double *Pos, double BoxSize)</div><div class="ttdef"><b>Definition:</b> <a href="peano_8h_source.html#l00016">peano.h:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_ab080cb20bac2a1a6153a84e8cfd15374_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_ab080cb20bac2a1a6153a84e8cfd15374_icgraph.svg" width="122" height="518"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af52079f2c63002aca9463ba0b13727df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af52079f2c63002aca9463ba0b13727df">&#9670;&nbsp;</a></span>long_range_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void long_range_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Driver routine to call initializiation of periodic or/and non-periodic FFT routines. </p>

<p class="definition">Definition at line <a class="el" href="longrange_8c_source.html#l00021">21</a> of file <a class="el" href="longrange_8c_source.html">longrange.c</a>.</p>

<p class="reference">References <a class="el" href="longrange_8c_source.html#l00033">fill_ntab()</a>, and <a class="el" href="gravpm_8c_source.html#l00055">gravpm_init_periodic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="begrun_8c_source.html#l00050">begrun()</a>.</p>
<div class="fragment"><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <a class="code" href="longrange_8c.html#a35575b446cf8d239ac5417132ca5d4c9">fill_ntab</a>();</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="longrange_8c.html#a6f198a51b7488e6d984ff7537d47fd13">gravpm_init_periodic</a>();</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;}</div><div class="ttc" id="longrange_8c_html_a6f198a51b7488e6d984ff7537d47fd13"><div class="ttname"><a href="longrange_8c.html#a6f198a51b7488e6d984ff7537d47fd13">gravpm_init_periodic</a></div><div class="ttdeci">void gravpm_init_periodic()</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00055">gravpm.c:55</a></div></div>
<div class="ttc" id="longrange_8c_html_a35575b446cf8d239ac5417132ca5d4c9"><div class="ttname"><a href="longrange_8c.html#a35575b446cf8d239ac5417132ca5d4c9">fill_ntab</a></div><div class="ttdeci">static void fill_ntab()</div><div class="ttdef"><b>Definition:</b> <a href="longrange_8c_source.html#l00033">longrange.c:33</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_af52079f2c63002aca9463ba0b13727df_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_af52079f2c63002aca9463ba0b13727df_icgraph.svg" width="122" height="518"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa10a9f512f8d08ea8cf2927cf6dba0b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa10a9f512f8d08ea8cf2927cf6dba0b7">&#9670;&nbsp;</a></span>open_outputfiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void open_outputfiles </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>RestartSnapNum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function opens various log-files that report on the status and performance of the simulstion. On restart from restart-files (start-option 1), the code will append to these files. </p>

<p class="definition">Definition at line <a class="el" href="begrun_8c_source.html#l00100">100</a> of file <a class="el" href="begrun_8c_source.html">begrun.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::CpuFile</a>, <a class="el" href="endrun_8c_source.html#l00210">endrun()</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::EnergyFile</a>, <a class="el" href="utils-string_8c_source.html#l00099">fastpm_path_ensure_dirname()</a>, <a class="el" href="utils-string_8c_source.html#l00070">fastpm_strdup_printf()</a>, <a class="el" href="allvars_8c_source.html#l00031">FdCPU</a>, <a class="el" href="allvars_8c_source.html#l00031">FdEnergy</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::OutputDir</a>, <a class="el" href="allvars_8h_source.html#l00354">global_data_all_processes::OutputEnergyDebug</a>, and <a class="el" href="allvars_8c_source.html#l00024">ThisTask</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00031">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> mode[3]=<span class="stringliteral">&quot;a+&quot;</span>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">char</span> * buf;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">char</span> * postfix;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> != 0) {</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="comment">/* only the root processors writes to the log files */</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    }</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span>(RestartSnapNum != -1) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        postfix = <a class="code" href="utils-string_8c.html#a787c3b0717214d830c69b7e8785a3e33">fastpm_strdup_printf</a>(<span class="stringliteral">&quot;-R%03d&quot;</span>, RestartSnapNum);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        postfix = <a class="code" href="utils-string_8c.html#a787c3b0717214d830c69b7e8785a3e33">fastpm_strdup_printf</a>(<span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    buf = <a class="code" href="utils-string_8c.html#a787c3b0717214d830c69b7e8785a3e33">fastpm_strdup_printf</a>(<span class="stringliteral">&quot;%s/%s%s&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ac2ba980c60460b89534ca8bba63cd679">CpuFile</a>, postfix);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="utils-string_8c.html#a3d6eb77c48ca9f3b7395a770ce76fe8b">fastpm_path_ensure_dirname</a>(buf);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span>(!(<a class="code" href="allvars_8c.html#aeaf0bacb2c9ca3f63d21ce9ca26b4992">FdCPU</a> = fopen(buf, mode)))</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(1, <span class="stringliteral">&quot;error in opening file &#39;%s&#39;\n&quot;</span>, buf);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    free(buf);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#af843a960c1f9b4cf62a6d7c61f518e90">OutputEnergyDebug</a>) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        buf = <a class="code" href="utils-string_8c.html#a787c3b0717214d830c69b7e8785a3e33">fastpm_strdup_printf</a>(<span class="stringliteral">&quot;%s/%s%s&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aa97394ab3a522c46b75f8b57a59ca0b5">EnergyFile</a>, postfix);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="utils-string_8c.html#a3d6eb77c48ca9f3b7395a770ce76fe8b">fastpm_path_ensure_dirname</a>(buf);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">if</span>(!(<a class="code" href="allvars_8c.html#a0230903e40950ac42dbff71dddd12176">FdEnergy</a> = fopen(buf, mode)))</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(1, <span class="stringliteral">&quot;error in opening file &#39;%s&#39;\n&quot;</span>, buf);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        free(buf);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#ifdef SFR</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    buf = <a class="code" href="utils-string_8c.html#a787c3b0717214d830c69b7e8785a3e33">fastpm_strdup_printf</a>(<span class="stringliteral">&quot;%s/%s%s&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <span class="stringliteral">&quot;sfr.txt&quot;</span>, postfix);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="utils-string_8c.html#a3d6eb77c48ca9f3b7395a770ce76fe8b">fastpm_path_ensure_dirname</a>(buf);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span>(!(FdSfr = fopen(buf, mode)))</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(1, <span class="stringliteral">&quot;error in opening file &#39;%s&#39;\n&quot;</span>, buf);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    free(buf);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#ifdef BLACK_HOLES</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    buf = <a class="code" href="utils-string_8c.html#a787c3b0717214d830c69b7e8785a3e33">fastpm_strdup_printf</a>(<span class="stringliteral">&quot;%s/%s%s&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <span class="stringliteral">&quot;blackholes.txt&quot;</span>, postfix);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="utils-string_8c.html#a3d6eb77c48ca9f3b7395a770ce76fe8b">fastpm_path_ensure_dirname</a>(buf);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span>(!(FdBlackHoles = fopen(buf, mode)))</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(1, <span class="stringliteral">&quot;error in opening file &#39;%s&#39;\n&quot;</span>, buf);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    free(buf);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="ttc" id="endrun_8c_html_ad963d7efdb9f10f7a2298c8ccd222ab0"><div class="ttname"><a href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a></div><div class="ttdeci">void endrun(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00210">endrun.c:210</a></div></div>
<div class="ttc" id="utils-string_8c_html_a3d6eb77c48ca9f3b7395a770ce76fe8b"><div class="ttname"><a href="utils-string_8c.html#a3d6eb77c48ca9f3b7395a770ce76fe8b">fastpm_path_ensure_dirname</a></div><div class="ttdeci">void fastpm_path_ensure_dirname(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="utils-string_8c_source.html#l00099">utils-string.c:99</a></div></div>
<div class="ttc" id="allvars_8c_html_aeaf0bacb2c9ca3f63d21ce9ca26b4992"><div class="ttname"><a href="allvars_8c.html#aeaf0bacb2c9ca3f63d21ce9ca26b4992">FdCPU</a></div><div class="ttdeci">FILE * FdCPU</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00031">allvars.c:31</a></div></div>
<div class="ttc" id="allvars_8c_html_a0230903e40950ac42dbff71dddd12176"><div class="ttname"><a href="allvars_8c.html#a0230903e40950ac42dbff71dddd12176">FdEnergy</a></div><div class="ttdeci">FILE * FdEnergy</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00031">allvars.c:31</a></div></div>
<div class="ttc" id="allvars_8c_html_a52c8c7d2abff436111942e02c5bb466a"><div class="ttname"><a href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a></div><div class="ttdeci">int ThisTask</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00024">allvars.c:24</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aebda5d1b80cfb767b9668d7858c36bcc"><div class="ttname"><a href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">global_data_all_processes::OutputDir</a></div><div class="ttdeci">char OutputDir[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_af843a960c1f9b4cf62a6d7c61f518e90"><div class="ttname"><a href="structglobal__data__all__processes.html#af843a960c1f9b4cf62a6d7c61f518e90">global_data_all_processes::OutputEnergyDebug</a></div><div class="ttdeci">int OutputEnergyDebug</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00354">allvars.h:354</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aa97394ab3a522c46b75f8b57a59ca0b5"><div class="ttname"><a href="structglobal__data__all__processes.html#aa97394ab3a522c46b75f8b57a59ca0b5">global_data_all_processes::EnergyFile</a></div><div class="ttdeci">char EnergyFile[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_ac2ba980c60460b89534ca8bba63cd679"><div class="ttname"><a href="structglobal__data__all__processes.html#ac2ba980c60460b89534ca8bba63cd679">global_data_all_processes::CpuFile</a></div><div class="ttdeci">char CpuFile[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="utils-string_8c_html_a787c3b0717214d830c69b7e8785a3e33"><div class="ttname"><a href="utils-string_8c.html#a787c3b0717214d830c69b7e8785a3e33">fastpm_strdup_printf</a></div><div class="ttdeci">char * fastpm_strdup_printf(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="utils-string_8c_source.html#l00070">utils-string.c:70</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_aa10a9f512f8d08ea8cf2927cf6dba0b7_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_aa10a9f512f8d08ea8cf2927cf6dba0b7_icgraph.svg" width="128" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a05e0ffe612d44e6d7f3a9ae5b9df56a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05e0ffe612d44e6d7f3a9ae5b9df56a2">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="run_8c_source.html#l00038">38</a> of file <a class="el" href="run_8c_source.html">run.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="timestep_8c_source.html#l00239">apply_half_kick()</a>, <a class="el" href="timestep_8c_source.html#l00261">apply_PM_half_kick()</a>, <a class="el" href="run_8c_source.html#l00190">compute_accelerations()</a>, <a class="el" href="domain_8c_source.html#l00133">domain_decompose_full()</a>, <a class="el" href="domain_8c_source.html#l00224">domain_maintain()</a>, <a class="el" href="drift_8c_source.html#l00173">drift_all_particles()</a>, <a class="el" href="endrun_8c_source.html#l00210">endrun()</a>, <a class="el" href="timebinmgr_8c_source.html#l00105">find_current_sync_point()</a>, <a class="el" href="timestep_8c_source.html#l00676">find_next_kick()</a>, <a class="el" href="timebinmgr_8c_source.html#l00091">find_next_sync_point()</a>, <a class="el" href="timestep_8c_source.html#l00131">find_timesteps()</a>, <a class="el" href="forcetree_8c_source.html#l00101">force_tree_rebuild()</a>, <a class="el" href="hci_8c_source.html#l00042">hci_action_init()</a>, <a class="el" href="hci_8c_source.html#l00011">HCI_DEFAULT_MANAGER</a>, <a class="el" href="hci_8c_source.html#l00155">hci_query()</a>, <a class="el" href="hci_8h_source.html#l00022">HCI_TERMINATE</a>, <a class="el" href="timestep_8c_source.html#l00104">is_PM_timestep()</a>, <a class="el" href="timebinmgr_8c_source.html#l00140">loga_from_ti()</a>, <a class="el" href="allvars_8h_source.html#l00157">global_data_all_processes::NTotalInit</a>, <a class="el" href="timestep_8c_source.html#l00710">print_timebin_statistics()</a>, <a class="el" href="timestep_8c_source.html#l00683">rebuild_activelist()</a>, <a class="el" href="mymalloc_8h_source.html#l00027">report_memory_usage</a>, <a class="el" href="timestep_8c_source.html#l00113">set_global_time()</a>, <a class="el" href="system_8c_source.html#l00124">set_random_numbers()</a>, <a class="el" href="slotsmanager_8c_source.html#l00121">slots_gc()</a>, <a class="el" href="allvars_8h_source.html#l00282">global_data_all_processes::Ti_Current</a>, <a class="el" href="allvars_8h_source.html#l00267">global_data_all_processes::Time</a>, <a class="el" href="allvars_8h_source.html#l00267">global_data_all_processes::TimeStep</a>, <a class="el" href="hci_8h_source.html#l00028">HCIAction::type</a>, <a class="el" href="walltime_8h_source.html#l00005">walltime_measure</a>, <a class="el" href="io_8c_source.html#l00025">write_checkpoint()</a>, <a class="el" href="run_8c_source.html#l00270">write_cpu_log()</a>, <a class="el" href="timebinmgr_8h_source.html#l00024">SyncPoint::write_fof</a>, <a class="el" href="timebinmgr_8h_source.html#l00023">SyncPoint::write_snapshot</a>, and <a class="el" href="hci_8h_source.html#l00029">HCIAction::write_snapshot</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00031">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">/*Number of timesteps performed this run*/</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">int</span> NumCurrentTiStep = 0;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">/*Minimum occupied timebin. Initially (but never again) zero*/</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordtype">int</span> minTimeBin = 0;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">/*Is gas physics enabled?*/</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">int</span> GasEnabled = <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#ab213f81cb93290e0e240488f3846495b">NTotalInit</a>[0] &gt; 0;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a>(<span class="stringliteral">&quot;/Misc&quot;</span>);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="run_8c.html#adc59e9ee1517e4e690694a64ab6a59d2">write_cpu_log</a>(NumCurrentTiStep); <span class="comment">/* produce some CPU usage info */</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">while</span>(1) <span class="comment">/* main loop */</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="comment">/* Find next synchronization point and the timebins active during this timestep.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">         * Note that on startup, P[i].TimeBin == 0 for all particles,</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">         * all bins except the zeroth are inactive and so we return 0 from this function.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">         * This ensures we run the force calculation for the first timestep.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a> = <a class="code" href="timestep_8c.html#aa7119c29751fcd9275f395e6ea08965f">find_next_kick</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>, minTimeBin);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="comment">/*Convert back to floating point time*/</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="timestep_8c.html#aaebcb31d8cb374d360e1e165df6fe26d">set_global_time</a>(exp(<a class="code" href="timebinmgr_8c.html#a90eb3a2bdca47035148249e68fc244be">loga_from_ti</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>)));</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="comment">/*1.0 check for rate setting in sfr_eff.c*/</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordflow">if</span>(NumCurrentTiStep &gt; 0 &amp;&amp; <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a05a40a90ec77ac379054f82acbec87dc">TimeStep</a> &lt; 0)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(1, <span class="stringliteral">&quot;Negative timestep: %g New Time: %g!\n&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a05a40a90ec77ac379054f82acbec87dc">TimeStep</a>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">Time</a>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordtype">int</span> is_PM = <a class="code" href="timestep_8c.html#a091981158d46c55661f089fc2812dc69">is_PM_timestep</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="structSyncPoint.html">SyncPoint</a> * next_sync; <span class="comment">/* if we are out of planned sync points, terminate */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="structSyncPoint.html">SyncPoint</a> * planned_sync; <span class="comment">/* NULL; if the step is not a planned sync point. */</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        next_sync = <a class="code" href="timebinmgr_8c.html#a4a7f3606a4cb958089f232db3fc51dd2">find_next_sync_point</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        planned_sync = <a class="code" href="timebinmgr_8c.html#aa1c832d9a92b9e906dbae0c9a7be298c">find_current_sync_point</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="structHCIAction.html">HCIAction</a> action[1];</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <a class="code" href="hci_8c.html#adf575054e41280d79cdcad95d436b33d">hci_action_init</a>(action); <span class="comment">/* init to no action */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordtype">int</span> stop = 0;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">if</span>(is_PM) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="comment">/* query HCI requests only on PM step; where kick and drifts are synced */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            stop = <a class="code" href="hci_8c.html#ab140bce619153b809e0fea49a2e1d081">hci_query</a>(<a class="code" href="hci_8c.html#a394fed67bae7e3db82a72073a19cc059">HCI_DEFAULT_MANAGER</a>, action);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">if</span>(action-&gt;<a class="code" href="structHCIAction.html#a5b7387d5b3a88f5b5389153cc585a07c">type</a> == <a class="code" href="hci_8h.html#aab3c66bd8d0f209c23a32209638ccbe1a3138a1dc4b0d345ec618539b80522d28">HCI_TERMINATE</a>) {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <a class="code" href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a>(0, <span class="stringliteral">&quot;Human triggered termination.\n&quot;</span>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="comment">/* Sync positions of all particles */</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="drift_8c.html#af3e58fb1ffbcc5aed5ce57df71c580e2">drift_all_particles</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">/* drift and domain decomposition */</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="comment">/* at first step this is a noop */</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span>(is_PM) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="comment">/* full decomposition rebuilds the tree */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <a class="code" href="domain_8c.html#a168c36ec12faca23e23395b6a13d2037">domain_decompose_full</a>();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="comment">/* FIXME: add a parameter for domain_decompose_incremental */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="comment">/* currently we drift all particles every step */</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="comment">/* If it is not a PM step, do a shorter version</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">             * of the domain decomp which just moves and exchanges drifted (active) particles.*/</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <a class="code" href="domain_8c.html#acf7b74bdcb6563a4603538914fc16157">domain_maintain</a>();</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="timestep_8c.html#ad04ae4be74d1729309b2a51cdc72e006">rebuild_activelist</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="timestep_8c.html#a213824fd52a446328b5b432c1b4b5c48">print_timebin_statistics</a>(NumCurrentTiStep);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="system_8c.html#a9cb45ef22cae101906f021fb7a23afbe">set_random_numbers</a>();</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="comment">/* update force to Ti_Current */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="run_8c.html#abb80d08f4d52f4a7bdf28d1cecfead5b">compute_accelerations</a>(is_PM, NumCurrentTiStep == 0, GasEnabled);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">/* Update velocity to Ti_Current; this synchonizes TiKick and TiDrift for the active particles */</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span>(is_PM) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <a class="code" href="timestep_8c.html#a6aa36b502b9220d87050ae0c28d533d8">apply_PM_half_kick</a>();</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="timestep_8c.html#a369dd5aca226397988138db95a8496b0">apply_half_kick</a>();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="comment">/* If a snapshot is requested, write it.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">         * write_checkpoint is responsible to maintain a valid domain and tree after it is called.</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">         *</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">         * We only attempt to output on sync points. This is the only chance where all variables are</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">         * synchonized in a consistent state in a K(KDDK)^mK scheme.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordtype">int</span> WriteSnapshot = 0;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordtype">int</span> WriteFOF = 0;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span>(planned_sync) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            WriteSnapshot |= planned_sync-&gt;<a class="code" href="structSyncPoint.html#af86f979490f9dd8cf7e9488f2c68503c">write_snapshot</a>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            WriteFOF |= planned_sync-&gt;<a class="code" href="structSyncPoint.html#a4423ca022f08153c9ae086784e97565b">write_fof</a>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordflow">if</span>(is_PM) { <span class="comment">/* the if here is unnecessary but to signify checkpointing occurs only at PM steps. */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            WriteSnapshot |= action-&gt;<a class="code" href="structHCIAction.html#a60b86f3851076753015f6025945edf91">write_snapshot</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span>(WriteSnapshot) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="comment">/* The accel may have created garbage -- collect them before writing a snapshot.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">             * If we do collect, rebuild tree and active list.*/</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordtype">int</span> compact[6] = {0};</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="slotsmanager_8c.html#a4f5a9c6b3e3d8049f173cd3a5fb9c983">slots_gc</a>(compact)) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <a class="code" href="forcetree_8c.html#a45a1a710bd7d997dbe7cf22a7600b731">force_tree_rebuild</a>();</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <a class="code" href="timestep_8c.html#ad04ae4be74d1729309b2a51cdc72e006">rebuild_activelist</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="io_8c.html#abebc4bd687935fe63fcb27a9767e5ded">write_checkpoint</a>(WriteSnapshot, WriteFOF);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="run_8c.html#adc59e9ee1517e4e690694a64ab6a59d2">write_cpu_log</a>(NumCurrentTiStep);        <span class="comment">/* produce some CPU usage info */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        NumCurrentTiStep++;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="mymalloc_8h.html#afaf046f010cd01115a573a59e1e73e01">report_memory_usage</a>(<span class="stringliteral">&quot;RUN&quot;</span>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">if</span>(!next_sync || stop) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="comment">/* out of sync points, or a requested stop, the run has finally finished! Yay.*/</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="comment">/* more steps to go. */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment">/* assign new timesteps to the active particles, now that we know they have synched TiKick and TiDrift */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="timestep_8c.html#ac4c17d0cf055339694fdd96baadd83c0">find_timesteps</a>(&amp;minTimeBin);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">/* Update velocity to the new step, with the newly computed step size */</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="timestep_8c.html#a369dd5aca226397988138db95a8496b0">apply_half_kick</a>();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span>(is_PM) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <a class="code" href="timestep_8c.html#a6aa36b502b9220d87050ae0c28d533d8">apply_PM_half_kick</a>();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="ttc" id="structglobal__data__all__processes_html_aac685530de56448068f8dd037fc56490"><div class="ttname"><a href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">global_data_all_processes::Ti_Current</a></div><div class="ttdeci">inttime_t Ti_Current</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00282">allvars.h:282</a></div></div>
<div class="ttc" id="hci_8c_html_adf575054e41280d79cdcad95d436b33d"><div class="ttname"><a href="hci_8c.html#adf575054e41280d79cdcad95d436b33d">hci_action_init</a></div><div class="ttdeci">void hci_action_init(HCIAction *action)</div><div class="ttdef"><b>Definition:</b> <a href="hci_8c_source.html#l00042">hci.c:42</a></div></div>
<div class="ttc" id="io_8c_html_abebc4bd687935fe63fcb27a9767e5ded"><div class="ttname"><a href="io_8c.html#abebc4bd687935fe63fcb27a9767e5ded">write_checkpoint</a></div><div class="ttdeci">void write_checkpoint(int WriteSnapshot, int WriteFOF)</div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00025">io.c:25</a></div></div>
<div class="ttc" id="timestep_8c_html_ac4c17d0cf055339694fdd96baadd83c0"><div class="ttname"><a href="timestep_8c.html#ac4c17d0cf055339694fdd96baadd83c0">find_timesteps</a></div><div class="ttdeci">int find_timesteps(int *MinTimeBin)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00131">timestep.c:131</a></div></div>
<div class="ttc" id="slotsmanager_8c_html_a4f5a9c6b3e3d8049f173cd3a5fb9c983"><div class="ttname"><a href="slotsmanager_8c.html#a4f5a9c6b3e3d8049f173cd3a5fb9c983">slots_gc</a></div><div class="ttdeci">int slots_gc(int *compact_slots)</div><div class="ttdef"><b>Definition:</b> <a href="slotsmanager_8c_source.html#l00121">slotsmanager.c:121</a></div></div>
<div class="ttc" id="endrun_8c_html_ad963d7efdb9f10f7a2298c8ccd222ab0"><div class="ttname"><a href="endrun_8c.html#ad963d7efdb9f10f7a2298c8ccd222ab0">endrun</a></div><div class="ttdeci">void endrun(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00210">endrun.c:210</a></div></div>
<div class="ttc" id="timestep_8c_html_aa7119c29751fcd9275f395e6ea08965f"><div class="ttname"><a href="timestep_8c.html#aa7119c29751fcd9275f395e6ea08965f">find_next_kick</a></div><div class="ttdeci">inttime_t find_next_kick(inttime_t Ti_Current, int minTimeBin)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00676">timestep.c:676</a></div></div>
<div class="ttc" id="domain_8c_html_acf7b74bdcb6563a4603538914fc16157"><div class="ttname"><a href="domain_8c.html#acf7b74bdcb6563a4603538914fc16157">domain_maintain</a></div><div class="ttdeci">void domain_maintain(void)</div><div class="ttdef"><b>Definition:</b> <a href="domain_8c_source.html#l00224">domain.c:224</a></div></div>
<div class="ttc" id="drift_8c_html_af3e58fb1ffbcc5aed5ce57df71c580e2"><div class="ttname"><a href="drift_8c.html#af3e58fb1ffbcc5aed5ce57df71c580e2">drift_all_particles</a></div><div class="ttdeci">void drift_all_particles(inttime_t ti1)</div><div class="ttdef"><b>Definition:</b> <a href="drift_8c_source.html#l00173">drift.c:173</a></div></div>
<div class="ttc" id="walltime_8h_html_a2d23071e44d020b4a0b3f2876667d370"><div class="ttname"><a href="walltime_8h.html#a2d23071e44d020b4a0b3f2876667d370">walltime_measure</a></div><div class="ttdeci">#define walltime_measure(name)</div><div class="ttdef"><b>Definition:</b> <a href="walltime_8h_source.html#l00005">walltime.h:5</a></div></div>
<div class="ttc" id="structHCIAction_html_a5b7387d5b3a88f5b5389153cc585a07c"><div class="ttname"><a href="structHCIAction.html#a5b7387d5b3a88f5b5389153cc585a07c">HCIAction::type</a></div><div class="ttdeci">enum HCIActionType type</div><div class="ttdef"><b>Definition:</b> <a href="hci_8h_source.html#l00028">hci.h:28</a></div></div>
<div class="ttc" id="hci_8c_html_ab140bce619153b809e0fea49a2e1d081"><div class="ttname"><a href="hci_8c.html#ab140bce619153b809e0fea49a2e1d081">hci_query</a></div><div class="ttdeci">int hci_query(HCIManager *manager, HCIAction *action)</div><div class="ttdef"><b>Definition:</b> <a href="hci_8c_source.html#l00155">hci.c:155</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a05a40a90ec77ac379054f82acbec87dc"><div class="ttname"><a href="structglobal__data__all__processes.html#a05a40a90ec77ac379054f82acbec87dc">global_data_all_processes::TimeStep</a></div><div class="ttdeci">double TimeStep</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00267">allvars.h:267</a></div></div>
<div class="ttc" id="timestep_8c_html_a369dd5aca226397988138db95a8496b0"><div class="ttname"><a href="timestep_8c.html#a369dd5aca226397988138db95a8496b0">apply_half_kick</a></div><div class="ttdeci">void apply_half_kick(void)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00239">timestep.c:239</a></div></div>
<div class="ttc" id="structSyncPoint_html"><div class="ttname"><a href="structSyncPoint.html">SyncPoint</a></div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8h_source.html#l00019">timebinmgr.h:19</a></div></div>
<div class="ttc" id="structHCIAction_html_a60b86f3851076753015f6025945edf91"><div class="ttname"><a href="structHCIAction.html#a60b86f3851076753015f6025945edf91">HCIAction::write_snapshot</a></div><div class="ttdeci">int write_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="hci_8h_source.html#l00029">hci.h:29</a></div></div>
<div class="ttc" id="domain_8c_html_a168c36ec12faca23e23395b6a13d2037"><div class="ttname"><a href="domain_8c.html#a168c36ec12faca23e23395b6a13d2037">domain_decompose_full</a></div><div class="ttdeci">void domain_decompose_full(void)</div><div class="ttdef"><b>Definition:</b> <a href="domain_8c_source.html#l00133">domain.c:133</a></div></div>
<div class="ttc" id="structHCIAction_html"><div class="ttname"><a href="structHCIAction.html">HCIAction</a></div><div class="ttdef"><b>Definition:</b> <a href="hci_8h_source.html#l00026">hci.h:26</a></div></div>
<div class="ttc" id="forcetree_8c_html_a45a1a710bd7d997dbe7cf22a7600b731"><div class="ttname"><a href="forcetree_8c.html#a45a1a710bd7d997dbe7cf22a7600b731">force_tree_rebuild</a></div><div class="ttdeci">void force_tree_rebuild()</div><div class="ttdef"><b>Definition:</b> <a href="forcetree_8c_source.html#l00101">forcetree.c:101</a></div></div>
<div class="ttc" id="timebinmgr_8c_html_aa1c832d9a92b9e906dbae0c9a7be298c"><div class="ttname"><a href="timebinmgr_8c.html#aa1c832d9a92b9e906dbae0c9a7be298c">find_current_sync_point</a></div><div class="ttdeci">SyncPoint * find_current_sync_point(inttime_t ti)</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8c_source.html#l00105">timebinmgr.c:105</a></div></div>
<div class="ttc" id="timestep_8c_html_ad04ae4be74d1729309b2a51cdc72e006"><div class="ttname"><a href="timestep_8c.html#ad04ae4be74d1729309b2a51cdc72e006">rebuild_activelist</a></div><div class="ttdeci">int rebuild_activelist(inttime_t Ti_Current)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00683">timestep.c:683</a></div></div>
<div class="ttc" id="timestep_8c_html_a213824fd52a446328b5b432c1b4b5c48"><div class="ttname"><a href="timestep_8c.html#a213824fd52a446328b5b432c1b4b5c48">print_timebin_statistics</a></div><div class="ttdeci">void print_timebin_statistics(int NumCurrentTiStep)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00710">timestep.c:710</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_a25b9da73fdcbdc45fbe4a6ad45479f09"><div class="ttname"><a href="structglobal__data__all__processes.html#a25b9da73fdcbdc45fbe4a6ad45479f09">global_data_all_processes::Time</a></div><div class="ttdeci">double Time</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00267">allvars.h:267</a></div></div>
<div class="ttc" id="system_8c_html_a9cb45ef22cae101906f021fb7a23afbe"><div class="ttname"><a href="system_8c.html#a9cb45ef22cae101906f021fb7a23afbe">set_random_numbers</a></div><div class="ttdeci">void set_random_numbers(void)</div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00124">system.c:124</a></div></div>
<div class="ttc" id="mymalloc_8h_html_afaf046f010cd01115a573a59e1e73e01"><div class="ttname"><a href="mymalloc_8h.html#afaf046f010cd01115a573a59e1e73e01">report_memory_usage</a></div><div class="ttdeci">#define report_memory_usage(x)</div><div class="ttdef"><b>Definition:</b> <a href="mymalloc_8h_source.html#l00027">mymalloc.h:27</a></div></div>
<div class="ttc" id="timebinmgr_8c_html_a4a7f3606a4cb958089f232db3fc51dd2"><div class="ttname"><a href="timebinmgr_8c.html#a4a7f3606a4cb958089f232db3fc51dd2">find_next_sync_point</a></div><div class="ttdeci">SyncPoint * find_next_sync_point(inttime_t ti)</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8c_source.html#l00091">timebinmgr.c:91</a></div></div>
<div class="ttc" id="timebinmgr_8c_html_a90eb3a2bdca47035148249e68fc244be"><div class="ttname"><a href="timebinmgr_8c.html#a90eb3a2bdca47035148249e68fc244be">loga_from_ti</a></div><div class="ttdeci">double loga_from_ti(inttime_t ti)</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8c_source.html#l00140">timebinmgr.c:140</a></div></div>
<div class="ttc" id="timestep_8c_html_a091981158d46c55661f089fc2812dc69"><div class="ttname"><a href="timestep_8c.html#a091981158d46c55661f089fc2812dc69">is_PM_timestep</a></div><div class="ttdeci">int is_PM_timestep(inttime_t ti)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00104">timestep.c:104</a></div></div>
<div class="ttc" id="timestep_8c_html_a6aa36b502b9220d87050ae0c28d533d8"><div class="ttname"><a href="timestep_8c.html#a6aa36b502b9220d87050ae0c28d533d8">apply_PM_half_kick</a></div><div class="ttdeci">void apply_PM_half_kick(void)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00261">timestep.c:261</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_ab213f81cb93290e0e240488f3846495b"><div class="ttname"><a href="structglobal__data__all__processes.html#ab213f81cb93290e0e240488f3846495b">global_data_all_processes::NTotalInit</a></div><div class="ttdeci">int64_t NTotalInit[6]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00157">allvars.h:157</a></div></div>
<div class="ttc" id="hci_8h_html_aab3c66bd8d0f209c23a32209638ccbe1a3138a1dc4b0d345ec618539b80522d28"><div class="ttname"><a href="hci_8h.html#aab3c66bd8d0f209c23a32209638ccbe1a3138a1dc4b0d345ec618539b80522d28">HCI_TERMINATE</a></div><div class="ttdef"><b>Definition:</b> <a href="hci_8h_source.html#l00022">hci.h:22</a></div></div>
<div class="ttc" id="run_8c_html_adc59e9ee1517e4e690694a64ab6a59d2"><div class="ttname"><a href="run_8c.html#adc59e9ee1517e4e690694a64ab6a59d2">write_cpu_log</a></div><div class="ttdeci">static void write_cpu_log(int NumCurrentTiStep)</div><div class="ttdef"><b>Definition:</b> <a href="run_8c_source.html#l00270">run.c:270</a></div></div>
<div class="ttc" id="structSyncPoint_html_a4423ca022f08153c9ae086784e97565b"><div class="ttname"><a href="structSyncPoint.html#a4423ca022f08153c9ae086784e97565b">SyncPoint::write_fof</a></div><div class="ttdeci">int write_fof</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8h_source.html#l00024">timebinmgr.h:24</a></div></div>
<div class="ttc" id="structSyncPoint_html_af86f979490f9dd8cf7e9488f2c68503c"><div class="ttname"><a href="structSyncPoint.html#af86f979490f9dd8cf7e9488f2c68503c">SyncPoint::write_snapshot</a></div><div class="ttdeci">int write_snapshot</div><div class="ttdef"><b>Definition:</b> <a href="timebinmgr_8h_source.html#l00023">timebinmgr.h:23</a></div></div>
<div class="ttc" id="run_8c_html_abb80d08f4d52f4a7bdf28d1cecfead5b"><div class="ttname"><a href="run_8c.html#abb80d08f4d52f4a7bdf28d1cecfead5b">compute_accelerations</a></div><div class="ttdeci">static void compute_accelerations(int is_PM, int FirstStep, int GasEnabled)</div><div class="ttdef"><b>Definition:</b> <a href="run_8c_source.html#l00190">run.c:190</a></div></div>
<div class="ttc" id="timestep_8c_html_aaebcb31d8cb374d360e1e165df6fe26d"><div class="ttname"><a href="timestep_8c.html#aaebcb31d8cb374d360e1e165df6fe26d">set_global_time</a></div><div class="ttdeci">void set_global_time(double newtime)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00113">timestep.c:113</a></div></div>
<div class="ttc" id="hci_8c_html_a394fed67bae7e3db82a72073a19cc059"><div class="ttname"><a href="hci_8c.html#a394fed67bae7e3db82a72073a19cc059">HCI_DEFAULT_MANAGER</a></div><div class="ttdeci">HCIManager HCI_DEFAULT_MANAGER[1]</div><div class="ttdef"><b>Definition:</b> <a href="hci_8c_source.html#l00011">hci.c:11</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a05e0ffe612d44e6d7f3a9ae5b9df56a2_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_a05e0ffe612d44e6d7f3a9ae5b9df56a2_icgraph.svg" width="122" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a31e2b1268008cc19dc0456f0c6deb831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31e2b1268008cc19dc0456f0c6deb831">&#9670;&nbsp;</a></span>runtests()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void runtests </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="runtests_8c_source.html#l00027">27</a> of file <a class="el" href="runtests_8c_source.html">runtests.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="domain_8c_source.html#l00133">domain_decompose_full()</a>, <a class="el" href="gdbtools_8c_source.html#l00056">GDB_format_particle()</a>, <a class="el" href="gravshort-pair_8c_source.html#l00024">grav_short_pair()</a>, <a class="el" href="gravshort-tree_8c_source.html#l00045">grav_short_tree()</a>, <a class="el" href="gravpm_8c_source.html#l00071">gravpm_force()</a>, <a class="el" href="petaio_8h_source.html#l00055">IO_REG</a>, <a class="el" href="endrun_8c_source.html#l00226">message()</a>, <a class="el" href="allvars_8c_source.html#l00025">NTask</a>, <a class="el" href="partmanager_8h_source.html#l00093">part_manager_type::NumPart</a>, <a class="el" href="allvars_8h_source.html#l00344">global_data_all_processes::OutputDir</a>, <a class="el" href="partmanager_8h_source.html#l00099">P</a>, <a class="el" href="partmanager_8c_source.html#l00009">PartManager</a>, <a class="el" href="petaio_8c_source.html#l00061">petaio_save_snapshot()</a>, <a class="el" href="timestep_8c_source.html#l00683">rebuild_activelist()</a>, <a class="el" href="allvars_8c_source.html#l00024">ThisTask</a>, and <a class="el" href="allvars_8h_source.html#l00282">global_data_all_processes::Ti_Current</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00031">main()</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;{</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="keywordtype">int</span> ptype;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">for</span>(ptype = 0; ptype &lt; 6; ptype++) {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <a class="code" href="petaio_8h.html#ace8e9a46838e0d813093bae6bf8cc226">IO_REG</a>(GravAccel,       <span class="stringliteral">&quot;f4&quot;</span>, 3, ptype);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <a class="code" href="petaio_8h.html#ace8e9a46838e0d813093bae6bf8cc226">IO_REG</a>(GravPM,       <span class="stringliteral">&quot;f4&quot;</span>, 3, ptype);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="gravpm_8c.html#a6a55456b331c8b01d7ae1352809b82f2">gravpm_force</a>();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">/* this produces a very imbalanced load to trigger Issue 86 */</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a> == 0) {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[0].GravCost = 1e10;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <a class="code" href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a>[<a class="code" href="partmanager_8c.html#a6cef44682776e476d8f9f1b9e1f9fe16">PartManager</a>-&gt;<a class="code" href="structpart__manager__type.html#ae19becfa10cbd680504de1eb3577cb75">NumPart</a> - 1].GravCost = 1e10;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    }</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="domain_8c.html#a168c36ec12faca23e23395b6a13d2037">domain_decompose_full</a>();    <span class="comment">/* do domain decomposition */</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="timestep_8c.html#ad04ae4be74d1729309b2a51cdc72e006">rebuild_activelist</a>(<a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">Ti_Current</a>);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="runtests_8c.html#a60eab909e50b5e048e572b833dcc2846">grav_short_pair</a>();</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0, <span class="stringliteral">&quot;GravShort Pairs %s\n&quot;</span>, <a class="code" href="runtests_8c.html#a88e8f06918ac7ece1c3755482ce6451e">GDB_format_particle</a>(0));</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="petaio_8c.html#a91ff9324adbdc5b2652db62e161042b8">petaio_save_snapshot</a>(<span class="stringliteral">&quot;%s/PART-pairs-%03d-mpi&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <a class="code" href="allvars_8c.html#a675acdcd149f5993271a1fdc11673b65">NTask</a>);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="gravshort-tree_8c.html#a3890f7b7605d1abaf3cd23eeca5bcdd5">grav_short_tree</a>();  <span class="comment">/* computes gravity accel. */</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="gravshort-tree_8c.html#a3890f7b7605d1abaf3cd23eeca5bcdd5">grav_short_tree</a>();  <span class="comment">/* computes gravity accel. */</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="gravshort-tree_8c.html#a3890f7b7605d1abaf3cd23eeca5bcdd5">grav_short_tree</a>();  <span class="comment">/* computes gravity accel. */</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="gravshort-tree_8c.html#a3890f7b7605d1abaf3cd23eeca5bcdd5">grav_short_tree</a>();  <span class="comment">/* computes gravity accel. */</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0, <span class="stringliteral">&quot;GravShort Tree %s\n&quot;</span>, <a class="code" href="runtests_8c.html#a88e8f06918ac7ece1c3755482ce6451e">GDB_format_particle</a>(0));</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="petaio_8c.html#a91ff9324adbdc5b2652db62e161042b8">petaio_save_snapshot</a>(<span class="stringliteral">&quot;%s/PART-tree-%03d-mpi&quot;</span>, <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">OutputDir</a>, <a class="code" href="allvars_8c.html#a675acdcd149f5993271a1fdc11673b65">NTask</a>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="structglobal__data__all__processes_html_aac685530de56448068f8dd037fc56490"><div class="ttname"><a href="structglobal__data__all__processes.html#aac685530de56448068f8dd037fc56490">global_data_all_processes::Ti_Current</a></div><div class="ttdeci">inttime_t Ti_Current</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00282">allvars.h:282</a></div></div>
<div class="ttc" id="partmanager_8h_html_a2748566f4c443ee77aa831e63dbb5ebe"><div class="ttname"><a href="partmanager_8h.html#a2748566f4c443ee77aa831e63dbb5ebe">P</a></div><div class="ttdeci">#define P</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8h_source.html#l00099">partmanager.h:99</a></div></div>
<div class="ttc" id="runtests_8c_html_a60eab909e50b5e048e572b833dcc2846"><div class="ttname"><a href="runtests_8c.html#a60eab909e50b5e048e572b833dcc2846">grav_short_pair</a></div><div class="ttdeci">void grav_short_pair(void)</div><div class="ttdef"><b>Definition:</b> <a href="gravshort-pair_8c_source.html#l00024">gravshort-pair.c:24</a></div></div>
<div class="ttc" id="domain_8c_html_a168c36ec12faca23e23395b6a13d2037"><div class="ttname"><a href="domain_8c.html#a168c36ec12faca23e23395b6a13d2037">domain_decompose_full</a></div><div class="ttdeci">void domain_decompose_full(void)</div><div class="ttdef"><b>Definition:</b> <a href="domain_8c_source.html#l00133">domain.c:133</a></div></div>
<div class="ttc" id="timestep_8c_html_ad04ae4be74d1729309b2a51cdc72e006"><div class="ttname"><a href="timestep_8c.html#ad04ae4be74d1729309b2a51cdc72e006">rebuild_activelist</a></div><div class="ttdeci">int rebuild_activelist(inttime_t Ti_Current)</div><div class="ttdef"><b>Definition:</b> <a href="timestep_8c_source.html#l00683">timestep.c:683</a></div></div>
<div class="ttc" id="allvars_8c_html_a675acdcd149f5993271a1fdc11673b65"><div class="ttname"><a href="allvars_8c.html#a675acdcd149f5993271a1fdc11673b65">NTask</a></div><div class="ttdeci">int NTask</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00025">allvars.c:25</a></div></div>
<div class="ttc" id="allvars_8c_html_a52c8c7d2abff436111942e02c5bb466a"><div class="ttname"><a href="allvars_8c.html#a52c8c7d2abff436111942e02c5bb466a">ThisTask</a></div><div class="ttdeci">int ThisTask</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00024">allvars.c:24</a></div></div>
<div class="ttc" id="petaio_8c_html_a91ff9324adbdc5b2652db62e161042b8"><div class="ttname"><a href="petaio_8c.html#a91ff9324adbdc5b2652db62e161042b8">petaio_save_snapshot</a></div><div class="ttdeci">void petaio_save_snapshot(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="petaio_8c_source.html#l00061">petaio.c:61</a></div></div>
<div class="ttc" id="structpart__manager__type_html_ae19becfa10cbd680504de1eb3577cb75"><div class="ttname"><a href="structpart__manager__type.html#ae19becfa10cbd680504de1eb3577cb75">part_manager_type::NumPart</a></div><div class="ttdeci">int NumPart</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8h_source.html#l00093">partmanager.h:93</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aebda5d1b80cfb767b9668d7858c36bcc"><div class="ttname"><a href="structglobal__data__all__processes.html#aebda5d1b80cfb767b9668d7858c36bcc">global_data_all_processes::OutputDir</a></div><div class="ttdeci">char OutputDir[100]</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00344">allvars.h:344</a></div></div>
<div class="ttc" id="gravpm_8c_html_a6a55456b331c8b01d7ae1352809b82f2"><div class="ttname"><a href="gravpm_8c.html#a6a55456b331c8b01d7ae1352809b82f2">gravpm_force</a></div><div class="ttdeci">void gravpm_force(void)</div><div class="ttdef"><b>Definition:</b> <a href="gravpm_8c_source.html#l00071">gravpm.c:71</a></div></div>
<div class="ttc" id="gravshort-tree_8c_html_a3890f7b7605d1abaf3cd23eeca5bcdd5"><div class="ttname"><a href="gravshort-tree_8c.html#a3890f7b7605d1abaf3cd23eeca5bcdd5">grav_short_tree</a></div><div class="ttdeci">void grav_short_tree(void)</div><div class="ttdef"><b>Definition:</b> <a href="gravshort-tree_8c_source.html#l00045">gravshort-tree.c:45</a></div></div>
<div class="ttc" id="runtests_8c_html_a88e8f06918ac7ece1c3755482ce6451e"><div class="ttname"><a href="runtests_8c.html#a88e8f06918ac7ece1c3755482ce6451e">GDB_format_particle</a></div><div class="ttdeci">char * GDB_format_particle(int i)</div><div class="ttdef"><b>Definition:</b> <a href="gdbtools_8c_source.html#l00056">gdbtools.c:56</a></div></div>
<div class="ttc" id="endrun_8c_html_a6567cd867c5549fb6586e19ccd819764"><div class="ttname"><a href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a></div><div class="ttdeci">void message(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00226">endrun.c:226</a></div></div>
<div class="ttc" id="petaio_8h_html_ace8e9a46838e0d813093bae6bf8cc226"><div class="ttname"><a href="petaio_8h.html#ace8e9a46838e0d813093bae6bf8cc226">IO_REG</a></div><div class="ttdeci">#define IO_REG(name, dtype, items, ptype)</div><div class="ttdef"><b>Definition:</b> <a href="petaio_8h_source.html#l00055">petaio.h:55</a></div></div>
<div class="ttc" id="partmanager_8c_html_a6cef44682776e476d8f9f1b9e1f9fe16"><div class="ttname"><a href="partmanager_8c.html#a6cef44682776e476d8f9f1b9e1f9fe16">PartManager</a></div><div class="ttdeci">struct part_manager_type PartManager[1]</div><div class="ttdef"><b>Definition:</b> <a href="partmanager_8c_source.html#l00009">partmanager.c:9</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a31e2b1268008cc19dc0456f0c6deb831_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_a31e2b1268008cc19dc0456f0c6deb831_icgraph.svg" width="122" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a312b6a02f7cde171412989ea5f9be48f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a312b6a02f7cde171412989ea5f9be48f">&#9670;&nbsp;</a></span>write_checkpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_checkpoint </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>write_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>write_fof</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io_8c_source.html#l00025">25</a> of file <a class="el" href="io_8c_source.html">io.c</a>.</p>

<p class="reference">References <a class="el" href="allvars_8c_source.html#l00047">All</a>, <a class="el" href="fof_8c_source.html#l00208">fof_finish()</a>, <a class="el" href="fof_8c_source.html#l00124">fof_fof()</a>, <a class="el" href="fof_8c_source.html#l00970">fof_save_groups()</a>, <a class="el" href="endrun_8c_source.html#l00226">message()</a>, <a class="el" href="allvars_8h_source.html#l00261">global_data_all_processes::SnapshotFileCount</a>, and <a class="el" href="io_8c_source.html#l00056">write_snapshot()</a>.</p>

<p class="reference">Referenced by <a class="el" href="run_8c_source.html#l00038">run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordflow">if</span>(!WriteSnapshot &amp;&amp; !WriteFOF) <span class="keywordflow">return</span>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordtype">int</span> snapnum = <a class="code" href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a>.<a class="code" href="structglobal__data__all__processes.html#aac0d3fcbac688a31e6bda55ef819c44b">SnapshotFileCount</a>++;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">if</span>(WriteSnapshot)</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="comment">/* write snapshot of particles */</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <a class="code" href="io_8c.html#aa920b944afc62d93d867175a9590b373">write_snapshot</a>(snapnum);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    }</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">if</span>(WriteFOF) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="comment">/* Compute and save FOF*/</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0, <span class="stringliteral">&quot;computing group catalogue...\n&quot;</span>);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <a class="code" href="fof_8c.html#a7f10d50a8e07ce0bb67ffdfaf904d7c8">fof_fof</a>();</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="fof_8c.html#ad08d3c5fd1cf1f78c75a17330a8e0348">fof_save_groups</a>(snapnum);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <a class="code" href="fof_8c.html#ac164d1d5cfdb4af63eb15a0d00030d30">fof_finish</a>();</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <a class="code" href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a>(0, <span class="stringliteral">&quot;done with group catalogue.\n&quot;</span>);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div><div class="ttc" id="io_8c_html_aa920b944afc62d93d867175a9590b373"><div class="ttname"><a href="io_8c.html#aa920b944afc62d93d867175a9590b373">write_snapshot</a></div><div class="ttdeci">static void write_snapshot(int num)</div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00056">io.c:56</a></div></div>
<div class="ttc" id="fof_8c_html_a7f10d50a8e07ce0bb67ffdfaf904d7c8"><div class="ttname"><a href="fof_8c.html#a7f10d50a8e07ce0bb67ffdfaf904d7c8">fof_fof</a></div><div class="ttdeci">void fof_fof()</div><div class="ttdef"><b>Definition:</b> <a href="fof_8c_source.html#l00124">fof.c:124</a></div></div>
<div class="ttc" id="endrun_8c_html_a6567cd867c5549fb6586e19ccd819764"><div class="ttname"><a href="endrun_8c.html#a6567cd867c5549fb6586e19ccd819764">message</a></div><div class="ttdeci">void message(int where, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="endrun_8c_source.html#l00226">endrun.c:226</a></div></div>
<div class="ttc" id="structglobal__data__all__processes_html_aac0d3fcbac688a31e6bda55ef819c44b"><div class="ttname"><a href="structglobal__data__all__processes.html#aac0d3fcbac688a31e6bda55ef819c44b">global_data_all_processes::SnapshotFileCount</a></div><div class="ttdeci">int SnapshotFileCount</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8h_source.html#l00261">allvars.h:261</a></div></div>
<div class="ttc" id="fof_8c_html_ad08d3c5fd1cf1f78c75a17330a8e0348"><div class="ttname"><a href="fof_8c.html#ad08d3c5fd1cf1f78c75a17330a8e0348">fof_save_groups</a></div><div class="ttdeci">void fof_save_groups(int num)</div><div class="ttdef"><b>Definition:</b> <a href="fof_8c_source.html#l00970">fof.c:970</a></div></div>
<div class="ttc" id="allvars_8c_html_ad49123ae0461ffe61629a0d4cf2ba91f"><div class="ttname"><a href="allvars_8c.html#ad49123ae0461ffe61629a0d4cf2ba91f">All</a></div><div class="ttdeci">struct global_data_all_processes All</div><div class="ttdef"><b>Definition:</b> <a href="allvars_8c_source.html#l00047">allvars.c:47</a></div></div>
<div class="ttc" id="fof_8c_html_ac164d1d5cfdb4af63eb15a0d00030d30"><div class="ttname"><a href="fof_8c.html#ac164d1d5cfdb4af63eb15a0d00030d30">fof_finish</a></div><div class="ttdeci">void fof_finish()</div><div class="ttdef"><b>Definition:</b> <a href="fof_8c_source.html#l00208">fof.c:208</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="proto_8h_a312b6a02f7cde171412989ea5f9be48f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="proto_8h_a312b6a02f7cde171412989ea5f9be48f_icgraph.svg" width="131" height="422"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
